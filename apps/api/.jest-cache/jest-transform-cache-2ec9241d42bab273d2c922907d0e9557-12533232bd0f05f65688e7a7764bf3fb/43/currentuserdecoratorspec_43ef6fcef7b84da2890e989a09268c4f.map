{"file":"/home/runner/work/snippetforge/snippetforge/apps/api/test/unit/decorators/current-user.decorator.spec.ts","mappings":";;AACA,wGAAiG;AACjG,uDAAoE;AAEpE,QAAQ,CAAC,uBAAuB,EAAE,GAAG,EAAE;IACrC,EAAE,CAAC,2CAA2C,EAAE,GAAG,EAAE;QACnD,MAAM,GAAG,GAAG,IAAA,uCAA0B,GAAE,CAAC;QAEzC,MAAM,MAAM,GAAG,IAAA,2CAAkB,EAC/B,SAAS,EACT,GAAkC,CACnC,CAAC;QAEF,MAAM,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,CAAC;IACjC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,iDAAiD,EAAE,GAAG,EAAE;QACzD,MAAM,IAAI,GAAG;YACX,EAAE,EAAE,QAAQ;YACZ,KAAK,EAAE,kBAAkB;YACzB,QAAQ,EAAE,QAAQ;SACnB,CAAC;QACF,MAAM,GAAG,GAAG,IAAA,uCAA0B,EAAC,EAAE,OAAO,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAE9D,MAAM,MAAM,GAAG,IAAA,2CAAkB,EAC/B,SAAS,EACT,GAAkC,CACnC,CAAC;QAEF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,gDAAgD,EAAE,GAAG,EAAE;QACxD,MAAM,IAAI,GAAG;YACX,EAAE,EAAE,QAAQ;YACZ,KAAK,EAAE,mBAAmB;YAC1B,QAAQ,EAAE,SAAS;SACpB,CAAC;QACF,MAAM,GAAG,GAAG,IAAA,uCAA0B,EAAC,EAAE,OAAO,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QAE9D,MAAM,MAAM,GAAG,IAAA,2CAAkB,EAC/B,OAAO,EACP,GAAkC,CACnC,CAAC;QAEF,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/home/runner/work/snippetforge/snippetforge/apps/api/test/unit/decorators/current-user.decorator.spec.ts"],"sourcesContent":["import { type ExecutionContext } from '@nestjs/common';\nimport { currentUserFactory } from '../../../src/modules/auth/decorators/current-user.decorator';\nimport { createMockExecutionContext } from '../../setup/test-utils';\n\ndescribe('CurrentUser decorator', () => {\n  it('returns undefined when no user is present', () => {\n    const ctx = createMockExecutionContext();\n\n    const result = currentUserFactory(\n      undefined,\n      ctx as unknown as ExecutionContext,\n    );\n\n    expect(result).toBeUndefined();\n  });\n\n  it('returns full user when no property is requested', () => {\n    const user = {\n      id: 'user-1',\n      email: 'user@example.com',\n      username: 'tester',\n    };\n    const ctx = createMockExecutionContext({ request: { user } });\n\n    const result = currentUserFactory(\n      undefined,\n      ctx as unknown as ExecutionContext,\n    );\n\n    expect(result).toEqual(user);\n  });\n\n  it('returns a single property when key is provided', () => {\n    const user = {\n      id: 'user-2',\n      email: 'user2@example.com',\n      username: 'tester2',\n    };\n    const ctx = createMockExecutionContext({ request: { user } });\n\n    const result = currentUserFactory(\n      'email',\n      ctx as unknown as ExecutionContext,\n    );\n\n    expect(result).toBe(user.email);\n  });\n});\n"],"version":3}