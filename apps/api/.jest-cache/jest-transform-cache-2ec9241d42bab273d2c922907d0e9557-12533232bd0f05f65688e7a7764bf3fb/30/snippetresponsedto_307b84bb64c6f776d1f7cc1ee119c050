f8a9707ff1e193909f7b72cf6bc53bf8
"use strict";
// src/modules/snippets/dto/snippet-response.dto.ts
Object.defineProperty(exports, "__esModule", { value: true });
exports.SnippetStatsResponseSchema = exports.PaginatedSnippetPreviewsResponseSchema = exports.PaginatedSnippetsResponseSchema = exports.PaginationMetaSchema = exports.SnippetPreviewResponseSchema = exports.SnippetWithUserResponseSchema = exports.SnippetResponseSchema = exports.SnippetAuthorSchema = void 0;
const zod_1 = require("zod");
/**
 * Snippet Response Schemas - Für API Response Dokumentation
 *
 * WARUM Response DTOs?
 * - Dokumentation: Swagger kann Schema nutzen
 * - Typsicherheit: Frontend weiß was es bekommt
 * - Konsistenz: Alle Snippet-Responses haben gleiches Format
 * - Security: Kann sensitive Felder filtern (z.B. internal IDs)
 */
/**
 * Basic User Info Schema (für Snippet-Author)
 */
exports.SnippetAuthorSchema = zod_1.z.object({
    id: zod_1.z.string().uuid(),
    username: zod_1.z.string(),
    avatarUrl: zod_1.z.string().nullable(),
});
/**
 * Full Snippet Response Schema
 * Verwendet für einzelne Snippet-Ansicht (mit Code)
 */
exports.SnippetResponseSchema = zod_1.z.object({
    id: zod_1.z.string().uuid(),
    title: zod_1.z.string(),
    description: zod_1.z.string().nullable(),
    code: zod_1.z.string(),
    language: zod_1.z.string(),
    userId: zod_1.z.string().uuid(),
    isPublic: zod_1.z.boolean(),
    viewCount: zod_1.z.number(),
    createdAt: zod_1.z.date(),
    updatedAt: zod_1.z.date(),
});
/**
 * Snippet Response with User Info
 * Für Ansichten wo Author-Info benötigt wird
 */
exports.SnippetWithUserResponseSchema = exports.SnippetResponseSchema.extend({
    user: exports.SnippetAuthorSchema,
});
/**
 * Snippet Preview Response Schema (ohne Code)
 * Verwendet für Listen-Ansichten (Performance!)
 *
 * PERFORMANCE: Code kann 50KB groß sein - für Listen nicht nötig!
 */
exports.SnippetPreviewResponseSchema = zod_1.z.object({
    id: zod_1.z.string().uuid(),
    title: zod_1.z.string(),
    description: zod_1.z.string().nullable(),
    language: zod_1.z.string(),
    userId: zod_1.z.string().uuid(),
    isPublic: zod_1.z.boolean(),
    viewCount: zod_1.z.number(),
    createdAt: zod_1.z.date(),
    updatedAt: zod_1.z.date(),
});
/**
 * Pagination Metadata Schema
 */
exports.PaginationMetaSchema = zod_1.z.object({
    page: zod_1.z.number(),
    limit: zod_1.z.number(),
    total: zod_1.z.number(),
    totalPages: zod_1.z.number(),
    hasNextPage: zod_1.z.boolean(),
    hasPreviousPage: zod_1.z.boolean(),
});
/**
 * Paginated Snippets Response Schema
 */
exports.PaginatedSnippetsResponseSchema = zod_1.z.object({
    data: zod_1.z.array(exports.SnippetResponseSchema),
    meta: exports.PaginationMetaSchema,
});
/**
 * Paginated Snippet Previews Response Schema
 */
exports.PaginatedSnippetPreviewsResponseSchema = zod_1.z.object({
    data: zod_1.z.array(exports.SnippetPreviewResponseSchema),
    meta: exports.PaginationMetaSchema,
});
/**
 * Snippet Statistics Response Schema
 */
exports.SnippetStatsResponseSchema = zod_1.z.object({
    total: zod_1.z.number(),
    public: zod_1.z.number(),
    private: zod_1.z.number(),
    totalViews: zod_1.z.number(),
    mostViewed: exports.SnippetResponseSchema.optional(),
    latestSnippet: exports.SnippetResponseSchema.optional(),
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmsvc25pcHBldGZvcmdlL3NuaXBwZXRmb3JnZS9hcHBzL2FwaS9zcmMvbW9kdWxlcy9zbmlwcGV0cy9kdG8vc25pcHBldC1yZXNwb25zZS5kdG8udHMiLCJtYXBwaW5ncyI6IjtBQUFBLG1EQUFtRDs7O0FBRW5ELDZCQUF3QjtBQUV4Qjs7Ozs7Ozs7R0FRRztBQUVIOztHQUVHO0FBQ1UsUUFBQSxtQkFBbUIsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQzFDLEVBQUUsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxFQUFFO0lBQ3JCLFFBQVEsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ3BCLFNBQVMsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0NBQ2pDLENBQUMsQ0FBQztBQUVIOzs7R0FHRztBQUNVLFFBQUEscUJBQXFCLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUM1QyxFQUFFLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRTtJQUNyQixLQUFLLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUNqQixXQUFXLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUNsQyxJQUFJLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUNoQixRQUFRLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUNwQixNQUFNLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksRUFBRTtJQUN6QixRQUFRLEVBQUUsT0FBQyxDQUFDLE9BQU8sRUFBRTtJQUNyQixTQUFTLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUNyQixTQUFTLEVBQUUsT0FBQyxDQUFDLElBQUksRUFBRTtJQUNuQixTQUFTLEVBQUUsT0FBQyxDQUFDLElBQUksRUFBRTtDQUNwQixDQUFDLENBQUM7QUFFSDs7O0dBR0c7QUFDVSxRQUFBLDZCQUE2QixHQUFHLDZCQUFxQixDQUFDLE1BQU0sQ0FBQztJQUN4RSxJQUFJLEVBQUUsMkJBQW1CO0NBQzFCLENBQUMsQ0FBQztBQUVIOzs7OztHQUtHO0FBQ1UsUUFBQSw0QkFBNEIsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQ25ELEVBQUUsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxFQUFFO0lBQ3JCLEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ2pCLFdBQVcsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQ2xDLFFBQVEsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ3BCLE1BQU0sRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxFQUFFO0lBQ3pCLFFBQVEsRUFBRSxPQUFDLENBQUMsT0FBTyxFQUFFO0lBQ3JCLFNBQVMsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ3JCLFNBQVMsRUFBRSxPQUFDLENBQUMsSUFBSSxFQUFFO0lBQ25CLFNBQVMsRUFBRSxPQUFDLENBQUMsSUFBSSxFQUFFO0NBQ3BCLENBQUMsQ0FBQztBQUVIOztHQUVHO0FBQ1UsUUFBQSxvQkFBb0IsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQzNDLElBQUksRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ2hCLEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ2pCLEtBQUssRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ2pCLFVBQVUsRUFBRSxPQUFDLENBQUMsTUFBTSxFQUFFO0lBQ3RCLFdBQVcsRUFBRSxPQUFDLENBQUMsT0FBTyxFQUFFO0lBQ3hCLGVBQWUsRUFBRSxPQUFDLENBQUMsT0FBTyxFQUFFO0NBQzdCLENBQUMsQ0FBQztBQUVIOztHQUVHO0FBQ1UsUUFBQSwrQkFBK0IsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQ3RELElBQUksRUFBRSxPQUFDLENBQUMsS0FBSyxDQUFDLDZCQUFxQixDQUFDO0lBQ3BDLElBQUksRUFBRSw0QkFBb0I7Q0FDM0IsQ0FBQyxDQUFDO0FBRUg7O0dBRUc7QUFDVSxRQUFBLHNDQUFzQyxHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7SUFDN0QsSUFBSSxFQUFFLE9BQUMsQ0FBQyxLQUFLLENBQUMsb0NBQTRCLENBQUM7SUFDM0MsSUFBSSxFQUFFLDRCQUFvQjtDQUMzQixDQUFDLENBQUM7QUFFSDs7R0FFRztBQUNVLFFBQUEsMEJBQTBCLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNqRCxLQUFLLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUNqQixNQUFNLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUNsQixPQUFPLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUNuQixVQUFVLEVBQUUsT0FBQyxDQUFDLE1BQU0sRUFBRTtJQUN0QixVQUFVLEVBQUUsNkJBQXFCLENBQUMsUUFBUSxFQUFFO0lBQzVDLGFBQWEsRUFBRSw2QkFBcUIsQ0FBQyxRQUFRLEVBQUU7Q0FDaEQsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL3NuaXBwZXRmb3JnZS9zbmlwcGV0Zm9yZ2UvYXBwcy9hcGkvc3JjL21vZHVsZXMvc25pcHBldHMvZHRvL3NuaXBwZXQtcmVzcG9uc2UuZHRvLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9tb2R1bGVzL3NuaXBwZXRzL2R0by9zbmlwcGV0LXJlc3BvbnNlLmR0by50c1xuXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcblxuLyoqXG4gKiBTbmlwcGV0IFJlc3BvbnNlIFNjaGVtYXMgLSBGw7xyIEFQSSBSZXNwb25zZSBEb2t1bWVudGF0aW9uXG4gKlxuICogV0FSVU0gUmVzcG9uc2UgRFRPcz9cbiAqIC0gRG9rdW1lbnRhdGlvbjogU3dhZ2dlciBrYW5uIFNjaGVtYSBudXR6ZW5cbiAqIC0gVHlwc2ljaGVyaGVpdDogRnJvbnRlbmQgd2Vpw58gd2FzIGVzIGJla29tbXRcbiAqIC0gS29uc2lzdGVuejogQWxsZSBTbmlwcGV0LVJlc3BvbnNlcyBoYWJlbiBnbGVpY2hlcyBGb3JtYXRcbiAqIC0gU2VjdXJpdHk6IEthbm4gc2Vuc2l0aXZlIEZlbGRlciBmaWx0ZXJuICh6LkIuIGludGVybmFsIElEcylcbiAqL1xuXG4vKipcbiAqIEJhc2ljIFVzZXIgSW5mbyBTY2hlbWEgKGbDvHIgU25pcHBldC1BdXRob3IpXG4gKi9cbmV4cG9ydCBjb25zdCBTbmlwcGV0QXV0aG9yU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKS51dWlkKCksXG4gIHVzZXJuYW1lOiB6LnN0cmluZygpLFxuICBhdmF0YXJVcmw6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbn0pO1xuXG4vKipcbiAqIEZ1bGwgU25pcHBldCBSZXNwb25zZSBTY2hlbWFcbiAqIFZlcndlbmRldCBmw7xyIGVpbnplbG5lIFNuaXBwZXQtQW5zaWNodCAobWl0IENvZGUpXG4gKi9cbmV4cG9ydCBjb25zdCBTbmlwcGV0UmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLnV1aWQoKSxcbiAgdGl0bGU6IHouc3RyaW5nKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gIGNvZGU6IHouc3RyaW5nKCksXG4gIGxhbmd1YWdlOiB6LnN0cmluZygpLFxuICB1c2VySWQ6IHouc3RyaW5nKCkudXVpZCgpLFxuICBpc1B1YmxpYzogei5ib29sZWFuKCksXG4gIHZpZXdDb3VudDogei5udW1iZXIoKSxcbiAgY3JlYXRlZEF0OiB6LmRhdGUoKSxcbiAgdXBkYXRlZEF0OiB6LmRhdGUoKSxcbn0pO1xuXG4vKipcbiAqIFNuaXBwZXQgUmVzcG9uc2Ugd2l0aCBVc2VyIEluZm9cbiAqIEbDvHIgQW5zaWNodGVuIHdvIEF1dGhvci1JbmZvIGJlbsO2dGlndCB3aXJkXG4gKi9cbmV4cG9ydCBjb25zdCBTbmlwcGV0V2l0aFVzZXJSZXNwb25zZVNjaGVtYSA9IFNuaXBwZXRSZXNwb25zZVNjaGVtYS5leHRlbmQoe1xuICB1c2VyOiBTbmlwcGV0QXV0aG9yU2NoZW1hLFxufSk7XG5cbi8qKlxuICogU25pcHBldCBQcmV2aWV3IFJlc3BvbnNlIFNjaGVtYSAob2huZSBDb2RlKVxuICogVmVyd2VuZGV0IGbDvHIgTGlzdGVuLUFuc2ljaHRlbiAoUGVyZm9ybWFuY2UhKVxuICpcbiAqIFBFUkZPUk1BTkNFOiBDb2RlIGthbm4gNTBLQiBncm/DnyBzZWluIC0gZsO8ciBMaXN0ZW4gbmljaHQgbsO2dGlnIVxuICovXG5leHBvcnQgY29uc3QgU25pcHBldFByZXZpZXdSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCkudXVpZCgpLFxuICB0aXRsZTogei5zdHJpbmcoKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgbGFuZ3VhZ2U6IHouc3RyaW5nKCksXG4gIHVzZXJJZDogei5zdHJpbmcoKS51dWlkKCksXG4gIGlzUHVibGljOiB6LmJvb2xlYW4oKSxcbiAgdmlld0NvdW50OiB6Lm51bWJlcigpLFxuICBjcmVhdGVkQXQ6IHouZGF0ZSgpLFxuICB1cGRhdGVkQXQ6IHouZGF0ZSgpLFxufSk7XG5cbi8qKlxuICogUGFnaW5hdGlvbiBNZXRhZGF0YSBTY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IFBhZ2luYXRpb25NZXRhU2NoZW1hID0gei5vYmplY3Qoe1xuICBwYWdlOiB6Lm51bWJlcigpLFxuICBsaW1pdDogei5udW1iZXIoKSxcbiAgdG90YWw6IHoubnVtYmVyKCksXG4gIHRvdGFsUGFnZXM6IHoubnVtYmVyKCksXG4gIGhhc05leHRQYWdlOiB6LmJvb2xlYW4oKSxcbiAgaGFzUHJldmlvdXNQYWdlOiB6LmJvb2xlYW4oKSxcbn0pO1xuXG4vKipcbiAqIFBhZ2luYXRlZCBTbmlwcGV0cyBSZXNwb25zZSBTY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IFBhZ2luYXRlZFNuaXBwZXRzUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGRhdGE6IHouYXJyYXkoU25pcHBldFJlc3BvbnNlU2NoZW1hKSxcbiAgbWV0YTogUGFnaW5hdGlvbk1ldGFTY2hlbWEsXG59KTtcblxuLyoqXG4gKiBQYWdpbmF0ZWQgU25pcHBldCBQcmV2aWV3cyBSZXNwb25zZSBTY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IFBhZ2luYXRlZFNuaXBwZXRQcmV2aWV3c1Jlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICBkYXRhOiB6LmFycmF5KFNuaXBwZXRQcmV2aWV3UmVzcG9uc2VTY2hlbWEpLFxuICBtZXRhOiBQYWdpbmF0aW9uTWV0YVNjaGVtYSxcbn0pO1xuXG4vKipcbiAqIFNuaXBwZXQgU3RhdGlzdGljcyBSZXNwb25zZSBTY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IFNuaXBwZXRTdGF0c1Jlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICB0b3RhbDogei5udW1iZXIoKSxcbiAgcHVibGljOiB6Lm51bWJlcigpLFxuICBwcml2YXRlOiB6Lm51bWJlcigpLFxuICB0b3RhbFZpZXdzOiB6Lm51bWJlcigpLFxuICBtb3N0Vmlld2VkOiBTbmlwcGV0UmVzcG9uc2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgbGF0ZXN0U25pcHBldDogU25pcHBldFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUWVBFU0NSSVBUIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHR5cGUgU25pcHBldEF1dGhvckR0byA9IHouaW5mZXI8dHlwZW9mIFNuaXBwZXRBdXRob3JTY2hlbWE+O1xuZXhwb3J0IHR5cGUgU25pcHBldFJlc3BvbnNlRHRvID0gei5pbmZlcjx0eXBlb2YgU25pcHBldFJlc3BvbnNlU2NoZW1hPjtcbmV4cG9ydCB0eXBlIFNuaXBwZXRXaXRoVXNlclJlc3BvbnNlRHRvID0gei5pbmZlcjxcbiAgdHlwZW9mIFNuaXBwZXRXaXRoVXNlclJlc3BvbnNlU2NoZW1hXG4+O1xuZXhwb3J0IHR5cGUgU25pcHBldFByZXZpZXdSZXNwb25zZUR0byA9IHouaW5mZXI8XG4gIHR5cGVvZiBTbmlwcGV0UHJldmlld1Jlc3BvbnNlU2NoZW1hXG4+O1xuZXhwb3J0IHR5cGUgUGFnaW5hdGlvbk1ldGFEdG8gPSB6LmluZmVyPHR5cGVvZiBQYWdpbmF0aW9uTWV0YVNjaGVtYT47XG5leHBvcnQgdHlwZSBQYWdpbmF0ZWRTbmlwcGV0c1Jlc3BvbnNlRHRvID0gei5pbmZlcjxcbiAgdHlwZW9mIFBhZ2luYXRlZFNuaXBwZXRzUmVzcG9uc2VTY2hlbWFcbj47XG5leHBvcnQgdHlwZSBQYWdpbmF0ZWRTbmlwcGV0UHJldmlld3NSZXNwb25zZUR0byA9IHouaW5mZXI8XG4gIHR5cGVvZiBQYWdpbmF0ZWRTbmlwcGV0UHJldmlld3NSZXNwb25zZVNjaGVtYVxuPjtcbmV4cG9ydCB0eXBlIFNuaXBwZXRTdGF0c1Jlc3BvbnNlRHRvID0gei5pbmZlcjxcbiAgdHlwZW9mIFNuaXBwZXRTdGF0c1Jlc3BvbnNlU2NoZW1hXG4+O1xuIl0sInZlcnNpb24iOjN9