cd89d810f2394916da2f23260dee33c6
"use strict";
// test/mocks/database.mock.ts
Object.defineProperty(exports, "__esModule", { value: true });
exports.createMockDatabaseService = void 0;
/**
 * Database Service Mock
 *
 * Mockt den DatabaseService für Unit Tests.
 * Keine echte DB-Verbindung nötig.
 */
const createMockDatabaseService = () => ({
    drizzle: {
        query: {
            // ========================================
            // USERS TABLE
            // ========================================
            users: {
                findFirst: jest.fn(),
                findMany: jest.fn(),
            },
            // ========================================
            // SNIPPETS TABLE (NEU!)
            // ========================================
            snippets: {
                findFirst: jest.fn(),
                findMany: jest.fn(),
            },
        },
        // ========================================
        // QUERY BUILDER METHODS
        // ========================================
        insert: jest.fn().mockReturnValue({
            values: jest.fn().mockReturnValue({
                returning: jest.fn(),
            }),
        }),
        update: jest.fn().mockReturnValue({
            set: jest.fn().mockReturnValue({
                where: jest.fn().mockReturnValue({
                    returning: jest.fn(),
                }),
            }),
        }),
        delete: jest.fn().mockReturnValue({
            where: jest.fn().mockReturnValue({
                returning: jest.fn(),
            }),
        }),
        select: jest.fn().mockReturnValue({
            from: jest.fn().mockReturnValue({
                where: jest.fn().mockReturnValue({
                    groupBy: jest.fn().mockReturnValue({
                        orderBy: jest.fn(),
                    }),
                }),
                limit: jest.fn().mockReturnValue({
                    offset: jest.fn().mockReturnValue({
                        orderBy: jest.fn(),
                    }),
                }),
                orderBy: jest.fn(),
            }),
        }),
    },
    // ========================================
    // DATABASE SERVICE METHODS
    // ========================================
    healthCheck: jest.fn().mockResolvedValue(true),
    onModuleInit: jest.fn(),
    onModuleDestroy: jest.fn(),
});
exports.createMockDatabaseService = createMockDatabaseService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmsvc25pcHBldGZvcmdlL3NuaXBwZXRmb3JnZS9hcHBzL2FwaS90ZXN0L21vY2tzL2RhdGFiYXNlLm1vY2sudHMiLCJtYXBwaW5ncyI6IjtBQUFBLDhCQUE4Qjs7O0FBRTlCOzs7OztHQUtHO0FBRUksTUFBTSx5QkFBeUIsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzlDLE9BQU8sRUFBRTtRQUNQLEtBQUssRUFBRTtZQUNMLDJDQUEyQztZQUMzQyxjQUFjO1lBQ2QsMkNBQTJDO1lBQzNDLEtBQUssRUFBRTtnQkFDTCxTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDcEIsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDcEI7WUFFRCwyQ0FBMkM7WUFDM0Msd0JBQXdCO1lBQ3hCLDJDQUEyQztZQUMzQyxRQUFRLEVBQUU7Z0JBQ1IsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ3BCLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2FBQ3BCO1NBQ0Y7UUFFRCwyQ0FBMkM7UUFDM0Msd0JBQXdCO1FBQ3hCLDJDQUEyQztRQUMzQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDckIsQ0FBQztTQUNILENBQUM7UUFFRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDN0IsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7b0JBQy9CLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2lCQUNyQixDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUM7UUFFRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDL0IsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDckIsQ0FBQztTQUNILENBQUM7UUFFRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDOUIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7b0JBQy9CLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDO3dCQUNqQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtxQkFDbkIsQ0FBQztpQkFDSCxDQUFDO2dCQUNGLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDO29CQUMvQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQzt3QkFDaEMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7cUJBQ25CLENBQUM7aUJBQ0gsQ0FBQztnQkFDRixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTthQUNuQixDQUFDO1NBQ0gsQ0FBQztLQUNIO0lBRUQsMkNBQTJDO0lBQzNDLDJCQUEyQjtJQUMzQiwyQ0FBMkM7SUFDM0MsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7SUFDOUMsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDdkIsZUFBZSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDM0IsQ0FBQyxDQUFDO0FBbEVVLFFBQUEseUJBQXlCLDZCQWtFbkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvc25pcHBldGZvcmdlL3NuaXBwZXRmb3JnZS9hcHBzL2FwaS90ZXN0L21vY2tzL2RhdGFiYXNlLm1vY2sudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGVzdC9tb2Nrcy9kYXRhYmFzZS5tb2NrLnRzXG5cbi8qKlxuICogRGF0YWJhc2UgU2VydmljZSBNb2NrXG4gKlxuICogTW9ja3QgZGVuIERhdGFiYXNlU2VydmljZSBmw7xyIFVuaXQgVGVzdHMuXG4gKiBLZWluZSBlY2h0ZSBEQi1WZXJiaW5kdW5nIG7DtnRpZy5cbiAqL1xuXG5leHBvcnQgY29uc3QgY3JlYXRlTW9ja0RhdGFiYXNlU2VydmljZSA9ICgpID0+ICh7XG4gIGRyaXp6bGU6IHtcbiAgICBxdWVyeToge1xuICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgLy8gVVNFUlMgVEFCTEVcbiAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgIHVzZXJzOiB7XG4gICAgICAgIGZpbmRGaXJzdDogamVzdC5mbigpLFxuICAgICAgICBmaW5kTWFueTogamVzdC5mbigpLFxuICAgICAgfSxcblxuICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgLy8gU05JUFBFVFMgVEFCTEUgKE5FVSEpXG4gICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICBzbmlwcGV0czoge1xuICAgICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgfSxcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBRVUVSWSBCVUlMREVSIE1FVEhPRFNcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgaW5zZXJ0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHZhbHVlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHJldHVybmluZzogamVzdC5mbigpLFxuICAgICAgfSksXG4gICAgfSksXG5cbiAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgc2V0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHJldHVybmluZzogamVzdC5mbigpLFxuICAgICAgICB9KSxcbiAgICAgIH0pLFxuICAgIH0pLFxuXG4gICAgZGVsZXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgcmV0dXJuaW5nOiBqZXN0LmZuKCksXG4gICAgICB9KSxcbiAgICB9KSxcblxuICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIGdyb3VwQnk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgb3JkZXJCeTogamVzdC5mbigpLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgICAgbGltaXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIG9mZnNldDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBvcmRlckJ5OiBqZXN0LmZuKCksXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICBvcmRlckJ5OiBqZXN0LmZuKCksXG4gICAgICB9KSxcbiAgICB9KSxcbiAgfSxcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIERBVEFCQVNFIFNFUlZJQ0UgTUVUSE9EU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGhlYWx0aENoZWNrOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gIG9uTW9kdWxlSW5pdDogamVzdC5mbigpLFxuICBvbk1vZHVsZURlc3Ryb3k6IGplc3QuZm4oKSxcbn0pO1xuXG5leHBvcnQgdHlwZSBNb2NrRGF0YWJhc2VTZXJ2aWNlID0gUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlTW9ja0RhdGFiYXNlU2VydmljZT47XG4iXSwidmVyc2lvbiI6M30=