{"file":"/home/runner/work/snippetforge/snippetforge/apps/api/test/unit/types/api-response.type.spec.ts","mappings":"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","names":[],"sources":["/home/runner/work/snippetforge/snippetforge/apps/api/test/unit/types/api-response.type.spec.ts"],"sourcesContent":["// test/unit/types/api-response.type.spec.ts\n\nimport {\n  isErrorResponse,\n  isSuccessResponse,\n  type ApiErrorResponse,\n  type ApiResponse,\n  type ApiResult,\n} from '../../../src/shared/types/api-response.type';\n\ndescribe('API Response Types', () => {\n  describe('isSuccessResponse', () => {\n    it('should return true for success response', () => {\n      const response: ApiResponse<{ id: string }> = {\n        success: true,\n        data: { id: 'test-id' },\n      };\n\n      expect(isSuccessResponse(response)).toBe(true);\n    });\n\n    it('should return false for error response', () => {\n      const response: ApiErrorResponse = {\n        success: false,\n        error: {\n          code: 'ERROR',\n          message: 'Test error',\n        },\n      };\n\n      expect(isSuccessResponse(response)).toBe(false);\n    });\n\n    it('should narrow type correctly', () => {\n      const response: ApiResult<{ id: string }> = {\n        success: true,\n        data: { id: 'test-id' },\n      };\n\n      if (isSuccessResponse(response)) {\n        // TypeScript knows response.data exists\n        expect(response.data.id).toBe('test-id');\n      }\n    });\n  });\n\n  describe('isErrorResponse', () => {\n    it('should return true for error response', () => {\n      const response: ApiErrorResponse = {\n        success: false,\n        error: {\n          code: 'ERROR',\n          message: 'Test error',\n        },\n      };\n\n      expect(isErrorResponse(response)).toBe(true);\n    });\n\n    it('should return false for success response', () => {\n      const response: ApiResponse<{ id: string }> = {\n        success: true,\n        data: { id: 'test-id' },\n      };\n\n      expect(isErrorResponse(response)).toBe(false);\n    });\n\n    it('should narrow type correctly', () => {\n      const response: ApiResult = {\n        success: false,\n        error: {\n          code: 'TEST_ERROR',\n          message: 'Test error message',\n        },\n      };\n\n      if (isErrorResponse(response)) {\n        // TypeScript knows response.error exists\n        expect(response.error.code).toBe('TEST_ERROR');\n        expect(response.error.message).toBe('Test error message');\n      }\n    });\n\n    it('should work with error details', () => {\n      const response: ApiErrorResponse = {\n        success: false,\n        error: {\n          code: 'VALIDATION_ERROR',\n          message: 'Validation failed',\n          details: { field: 'email', issue: 'Invalid format' },\n        },\n      };\n\n      if (isErrorResponse(response)) {\n        expect(response.error.details).toEqual({\n          field: 'email',\n          issue: 'Invalid format',\n        });\n      }\n    });\n  });\n\n  describe('ApiResponse with meta', () => {\n    it('should handle meta information', () => {\n      const response: ApiResponse<string[]> = {\n        success: true,\n        data: ['item1', 'item2'],\n        meta: {\n          timestamp: '2026-01-12T10:00:00Z',\n          requestId: 'req-123',\n          pagination: {\n            page: 1,\n            limit: 10,\n            total: 2,\n            totalPages: 1,\n          },\n        },\n      };\n\n      expect(response.meta?.pagination?.total).toBe(2);\n      expect(response.meta?.requestId).toBe('req-123');\n    });\n  });\n});\n"],"version":3}