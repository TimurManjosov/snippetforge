c52fb933bee8513c9c3b93db5eecd7fd
"use strict";
// test/setup/jest.setup.ts
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Jest Global Setup
 *
 * Wird VOR jedem Test-File ausgeführt.
 * Hier konfigurieren wir globale Test-Einstellungen.
 */
// ========================================
// ENVIRONMENT VARIABLES
// ========================================
// Test-spezifische Environment Variables
process.env.NODE_ENV = 'test';
process.env.JWT_SECRET =
    'test-secret-key-for-testing-only-min-32-characters-long';
process.env.JWT_EXPIRES_IN = '15m';
process.env.DATABASE_URL =
    'postgresql://snippetforge:dev_password@localhost:5432/snippetforge';
// ========================================
// GLOBAL MOCKS
// ========================================
// Console Mocks (optional - reduziert Noise in Test Output)
// Auskommentieren wenn Debug-Output benötigt wird
// global.console = {
//   ... console,
//   log: jest. fn(),
//   debug: jest.fn(),
//   info: jest.fn(),
//   warn: jest.fn(),
//   error: jest.fn(),
// }
// ========================================
// CUSTOM MATCHERS
// ========================================
// Erweiterte Expect-Matcher (optional)
expect.extend({
    /**
     * Prüft ob ein Objekt eine UUID enthält
     */
    toBeUUID(received) {
        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
        const pass = uuidRegex.test(received);
        return {
            pass,
            message: () => pass
                ? `Expected ${received} not to be a valid UUID`
                : `Expected ${received} to be a valid UUID`,
        };
    },
    /**
     * Prüft ob ein String ein JWT Token ist
     */
    toBeJWT(received) {
        const jwtRegex = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;
        const pass = jwtRegex.test(received);
        return {
            pass,
            message: () => pass
                ? `Expected ${received} not to be a JWT token`
                : `Expected ${received} to be a JWT token`,
        };
    },
});
// ========================================
// GLOBAL TEST UTILITIES
// ========================================
// Erhöhe Timeout für langsame Tests
jest.setTimeout(10000);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmsvc25pcHBldGZvcmdlL3NuaXBwZXRmb3JnZS9hcHBzL2FwaS90ZXN0L3NldHVwL2plc3Quc2V0dXAudHMiLCJtYXBwaW5ncyI6IjtBQUFBLDJCQUEyQjs7QUFFM0I7Ozs7O0dBS0c7QUFFSCwyQ0FBMkM7QUFDM0Msd0JBQXdCO0FBQ3hCLDJDQUEyQztBQUUzQyx5Q0FBeUM7QUFDekMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO0FBQzlCLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVTtJQUNwQix5REFBeUQsQ0FBQztBQUM1RCxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7QUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZO0lBQ3RCLG9FQUFvRSxDQUFDO0FBRXZFLDJDQUEyQztBQUMzQyxlQUFlO0FBQ2YsMkNBQTJDO0FBRTNDLDREQUE0RDtBQUM1RCxrREFBa0Q7QUFDbEQscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixxQkFBcUI7QUFDckIsc0JBQXNCO0FBQ3RCLHFCQUFxQjtBQUNyQixxQkFBcUI7QUFDckIsc0JBQXNCO0FBQ3RCLElBQUk7QUFFSiwyQ0FBMkM7QUFDM0Msa0JBQWtCO0FBQ2xCLDJDQUEyQztBQUUzQyx1Q0FBdUM7QUFDdkMsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNaOztPQUVHO0lBQ0gsUUFBUSxDQUFDLFFBQWdCO1FBQ3ZCLE1BQU0sU0FBUyxHQUNiLHdFQUF3RSxDQUFDO1FBQzNFLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFdEMsT0FBTztZQUNMLElBQUk7WUFDSixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQ1osSUFBSTtnQkFDRixDQUFDLENBQUMsWUFBWSxRQUFRLHlCQUF5QjtnQkFDL0MsQ0FBQyxDQUFDLFlBQVksUUFBUSxxQkFBcUI7U0FDaEQsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILE9BQU8sQ0FBQyxRQUFnQjtRQUN0QixNQUFNLFFBQVEsR0FBRyxrREFBa0QsQ0FBQztRQUNwRSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRXJDLE9BQU87WUFDTCxJQUFJO1lBQ0osT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUNaLElBQUk7Z0JBQ0YsQ0FBQyxDQUFDLFlBQVksUUFBUSx3QkFBd0I7Z0JBQzlDLENBQUMsQ0FBQyxZQUFZLFFBQVEsb0JBQW9CO1NBQy9DLENBQUM7SUFDSixDQUFDO0NBQ0YsQ0FBQyxDQUFDO0FBVUgsMkNBQTJDO0FBQzNDLHdCQUF3QjtBQUN4QiwyQ0FBMkM7QUFFM0Msb0NBQW9DO0FBQ3BDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmsvc25pcHBldGZvcmdlL3NuaXBwZXRmb3JnZS9hcHBzL2FwaS90ZXN0L3NldHVwL2plc3Quc2V0dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGVzdC9zZXR1cC9qZXN0LnNldHVwLnRzXG5cbi8qKlxuICogSmVzdCBHbG9iYWwgU2V0dXBcbiAqXG4gKiBXaXJkIFZPUiBqZWRlbSBUZXN0LUZpbGUgYXVzZ2Vmw7xocnQuXG4gKiBIaWVyIGtvbmZpZ3VyaWVyZW4gd2lyIGdsb2JhbGUgVGVzdC1FaW5zdGVsbHVuZ2VuLlxuICovXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVOVklST05NRU5UIFZBUklBQkxFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBUZXN0LXNwZXppZmlzY2hlIEVudmlyb25tZW50IFZhcmlhYmxlc1xucHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSAndGVzdCc7XG5wcm9jZXNzLmVudi5KV1RfU0VDUkVUID1cbiAgJ3Rlc3Qtc2VjcmV0LWtleS1mb3ItdGVzdGluZy1vbmx5LW1pbi0zMi1jaGFyYWN0ZXJzLWxvbmcnO1xucHJvY2Vzcy5lbnYuSldUX0VYUElSRVNfSU4gPSAnMTVtJztcbnByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCA9XG4gICdwb3N0Z3Jlc3FsOi8vc25pcHBldGZvcmdlOmRldl9wYXNzd29yZEBsb2NhbGhvc3Q6NTQzMi9zbmlwcGV0Zm9yZ2UnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBHTE9CQUwgTU9DS1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gQ29uc29sZSBNb2NrcyAob3B0aW9uYWwgLSByZWR1emllcnQgTm9pc2UgaW4gVGVzdCBPdXRwdXQpXG4vLyBBdXNrb21tZW50aWVyZW4gd2VubiBEZWJ1Zy1PdXRwdXQgYmVuw7Z0aWd0IHdpcmRcbi8vIGdsb2JhbC5jb25zb2xlID0ge1xuLy8gICAuLi4gY29uc29sZSxcbi8vICAgbG9nOiBqZXN0LiBmbigpLFxuLy8gICBkZWJ1ZzogamVzdC5mbigpLFxuLy8gICBpbmZvOiBqZXN0LmZuKCksXG4vLyAgIHdhcm46IGplc3QuZm4oKSxcbi8vICAgZXJyb3I6IGplc3QuZm4oKSxcbi8vIH1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ1VTVE9NIE1BVENIRVJTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIEVyd2VpdGVydGUgRXhwZWN0LU1hdGNoZXIgKG9wdGlvbmFsKVxuZXhwZWN0LmV4dGVuZCh7XG4gIC8qKlxuICAgKiBQcsO8ZnQgb2IgZWluIE9iamVrdCBlaW5lIFVVSUQgZW50aMOkbHRcbiAgICovXG4gIHRvQmVVVUlEKHJlY2VpdmVkOiBzdHJpbmcpIHtcbiAgICBjb25zdCB1dWlkUmVnZXggPVxuICAgICAgL15bMC05YS1mXXs4fS1bMC05YS1mXXs0fS00WzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9JC9pO1xuICAgIGNvbnN0IHBhc3MgPSB1dWlkUmVnZXgudGVzdChyZWNlaXZlZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFzcyxcbiAgICAgIG1lc3NhZ2U6ICgpID0+XG4gICAgICAgIHBhc3NcbiAgICAgICAgICA/IGBFeHBlY3RlZCAke3JlY2VpdmVkfSBub3QgdG8gYmUgYSB2YWxpZCBVVUlEYFxuICAgICAgICAgIDogYEV4cGVjdGVkICR7cmVjZWl2ZWR9IHRvIGJlIGEgdmFsaWQgVVVJRGAsXG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogUHLDvGZ0IG9iIGVpbiBTdHJpbmcgZWluIEpXVCBUb2tlbiBpc3RcbiAgICovXG4gIHRvQmVKV1QocmVjZWl2ZWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGp3dFJlZ2V4ID0gL15bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXSokLztcbiAgICBjb25zdCBwYXNzID0gand0UmVnZXgudGVzdChyZWNlaXZlZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFzcyxcbiAgICAgIG1lc3NhZ2U6ICgpID0+XG4gICAgICAgIHBhc3NcbiAgICAgICAgICA/IGBFeHBlY3RlZCAke3JlY2VpdmVkfSBub3QgdG8gYmUgYSBKV1QgdG9rZW5gXG4gICAgICAgICAgOiBgRXhwZWN0ZWQgJHtyZWNlaXZlZH0gdG8gYmUgYSBKV1QgdG9rZW5gLFxuICAgIH07XG4gIH0sXG59KTtcblxuLy8gVHlwZVNjcmlwdCBEZWtsYXJhdGlvbiBmw7xyIEN1c3RvbSBNYXRjaGVyc1xuZGVjbGFyZSBtb2R1bGUgJ2V4cGVjdCcge1xuICBpbnRlcmZhY2UgTWF0Y2hlcnM8Uj4ge1xuICAgIHRvQmVVVUlEKCk6IFI7XG4gICAgdG9CZUpXVCgpOiBSO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdMT0JBTCBURVNUIFVUSUxJVElFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBFcmjDtmhlIFRpbWVvdXQgZsO8ciBsYW5nc2FtZSBUZXN0c1xuamVzdC5zZXRUaW1lb3V0KDEwMDAwKTtcbiJdLCJ2ZXJzaW9uIjozfQ==