{"file":"/home/runner/work/snippetforge/snippetforge/apps/api/src/modules/snippets/snippets.types.ts","mappings":";AAAA,yCAAyC;;;AA8NzC,4CAIC;AASD,0DAeC;AA5DD;;GAEG;AACU,QAAA,YAAY,GAAuB;IAC9C,MAAM,EAAE,WAAW;IACnB,KAAK,EAAE,MAAM;CACd,CAAC;AAiBF,+DAA+D;AAC/D,mBAAmB;AACnB,+DAA+D;AAE/D;;;;GAIG;AACH,SAAgB,gBAAgB,CAAC,OAAgB;IAC/C,6DAA6D;IAC7D,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE,GAAG,OAAO,CAAC;IACrC,OAAO,OAAO,CAAC;AACjB,CAAC;AAED;;;;;;GAMG;AACH,SAAgB,uBAAuB,CACrC,KAAa,EACb,IAAY,EACZ,KAAa;IAEb,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC;IAE5C,OAAO;QACL,IAAI;QACJ,KAAK;QACL,KAAK;QACL,UAAU;QACV,WAAW,EAAE,IAAI,GAAG,UAAU;QAC9B,eAAe,EAAE,IAAI,GAAG,CAAC;KAC1B,CAAC;AACJ,CAAC","names":[],"sources":["/home/runner/work/snippetforge/snippetforge/apps/api/src/modules/snippets/snippets.types.ts"],"sourcesContent":["// src/modules/snippets/snippets.types.ts\n\nimport { type NewSnippet, type Snippet } from '../../lib/db/schema';\n\n/**\n * Snippets Types - Domain Types für Snippet-Operations\n *\n * WARUM separate Types?\n * 1. Entkopplung: API-Layer kann andere Typen haben als DB-Layer\n * 2. Erweiterbarkeit: Wir können zusätzliche Felder hinzufügen (z.B. User-Info)\n * 3. Type-Safety: TypeScript prüft alle Transformationen\n * 4. Documentation: Types dokumentieren die Datenstruktur\n *\n * CLEAN CODE REGEL #1: Domain-Driven Design\n * - Types repräsentieren Business-Konzepte, nicht DB-Tabellen\n */\n\n// ============================================================\n// BASIC TYPES (Re-export from Schema)\n// ============================================================\n\n/**\n * Snippet - Vollständiges Snippet aus DB\n * Enthält alle Felder inklusive Timestamps\n */\nexport type { NewSnippet, Snippet };\n\n// ============================================================\n// EXTENDED TYPES\n// ============================================================\n\n/**\n * Snippet mit User-Information (für API Responses)\n *\n * Wird später mit JOIN geholt wenn wir User-Daten anzeigen wollen\n * Beispiel: Snippet-Liste zeigt Author-Name\n */\nexport interface SnippetWithUser extends Snippet {\n  user: {\n    id: string;\n    username: string;\n    avatarUrl: string | null;\n  };\n}\n\n/**\n * Snippet ohne Code (für Listen-Ansichten)\n *\n * PERFORMANCE REGEL #3: Select only needed columns\n * Code kann 50KB groß sein - für Listen brauchen wir das nicht!\n */\nexport interface SnippetPreview {\n  id: string;\n  title: string;\n  description: string | null;\n  language: string;\n  userId: string;\n  isPublic: boolean;\n  viewCount: number;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// ============================================================\n// STATISTICS TYPES\n// ============================================================\n\n/**\n * Snippet Statistics für User-Dashboard\n *\n * Zeigt Übersicht über alle Snippets eines Users\n */\nexport interface SnippetStats {\n  /** Gesamtanzahl Snippets */\n  total: number;\n\n  /** Anzahl öffentlicher Snippets */\n  public: number;\n\n  /** Anzahl privater Snippets */\n  private: number;\n\n  /** Summe aller Views */\n  totalViews: number;\n\n  /** Meist-angesehener Snippet (optional) */\n  mostViewed?: Snippet;\n\n  /** Zuletzt erstellter Snippet (optional) */\n  latestSnippet?: Snippet;\n}\n\n/**\n * Language Statistics\n * Zeigt welche Programmiersprachen am häufigsten verwendet werden\n */\nexport interface LanguageStats {\n  language: string;\n  count: number;\n  percentage: number;\n}\n\n// ============================================================\n// PAGINATION TYPES\n// ============================================================\n\n/**\n * Pagination Metadata\n *\n * PERFORMANCE REGEL #2: Pagination\n * Enthält alle Infos die Frontend für Pagination braucht\n */\nexport interface PaginationMeta {\n  /** Aktuelle Seite (1-indexed) */\n  page: number;\n\n  /** Items pro Seite */\n  limit: number;\n\n  /** Gesamtanzahl Items */\n  total: number;\n\n  /** Gesamtanzahl Seiten */\n  totalPages: number;\n\n  /** Gibt es eine nächste Seite? */\n  hasNextPage: boolean;\n\n  /** Gibt es eine vorherige Seite? */\n  hasPreviousPage: boolean;\n}\n\n/**\n * Paginated Response\n * Standard-Format für paginierte Listen\n */\nexport interface PaginatedSnippets {\n  data: Snippet[];\n  meta: PaginationMeta;\n}\n\n/**\n * Paginated Previews (ohne Code)\n * Für Listen-Ansichten\n */\nexport interface PaginatedSnippetPreviews {\n  data: SnippetPreview[];\n  meta: PaginationMeta;\n}\n\n// ============================================================\n// FILTER & SORT TYPES\n// ============================================================\n\n/**\n * Snippet Filter Options\n * Alle möglichen Filter-Parameter für Snippet-Suche\n */\nexport interface SnippetFilters {\n  /** Filter nach User ID */\n  userId?: string;\n\n  /** Filter nach Programmiersprache */\n  language?: string;\n\n  /** Filter nach Sichtbarkeit */\n  isPublic?: boolean;\n\n  /** Volltextsuche (Title + Description) */\n  search?: string;\n\n  /** Filter nach Erstellungsdatum (ab) */\n  createdAfter?: Date;\n\n  /** Filter nach Erstellungsdatum (bis) */\n  createdBefore?: Date;\n}\n\n/**\n * Snippet Sort Options\n * Definiert Sortierung von Snippet-Listen\n */\nexport type SnippetSortBy = 'createdAt' | 'updatedAt' | 'viewCount' | 'title';\nexport type SortOrder = 'asc' | 'desc';\n\nexport interface SnippetSortOptions {\n  sortBy: SnippetSortBy;\n  order: SortOrder;\n}\n\n/**\n * Default Sort Option\n */\nexport const DEFAULT_SORT: SnippetSortOptions = {\n  sortBy: 'createdAt',\n  order: 'desc',\n};\n\n// ============================================================\n// QUERY OPTIONS (Combined)\n// ============================================================\n\n/**\n * Snippet Query Options\n * Kombiniert Filter, Sort und Pagination\n */\nexport interface SnippetQueryOptions {\n  filters?: SnippetFilters;\n  sort?: SnippetSortOptions;\n  page?: number;\n  limit?: number;\n}\n\n// ============================================================\n// HELPER FUNCTIONS\n// ============================================================\n\n/**\n * Konvertiert Snippet zu Preview (entfernt Code)\n *\n * PERFORMANCE: Spart Bandwidth bei Listen-Ansichten\n */\nexport function toSnippetPreview(snippet: Snippet): SnippetPreview {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { code, ...preview } = snippet;\n  return preview;\n}\n\n/**\n * Berechnet Pagination Meta\n *\n * @param total - Gesamtanzahl Items\n * @param page - Aktuelle Seite (1-indexed)\n * @param limit - Items pro Seite\n */\nexport function calculatePaginationMeta(\n  total: number,\n  page: number,\n  limit: number,\n): PaginationMeta {\n  const totalPages = Math.ceil(total / limit);\n\n  return {\n    page,\n    limit,\n    total,\n    totalPages,\n    hasNextPage: page < totalPages,\n    hasPreviousPage: page > 1,\n  };\n}\n"],"version":3}