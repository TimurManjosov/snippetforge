cdbeafa3fc33991a47cc7a1ca7504504
"use strict";
// test/unit/dto/snippets/snippet-response.dto.spec.ts
Object.defineProperty(exports, "__esModule", { value: true });
const snippet_response_dto_1 = require("../../../../src/modules/snippets/dto/snippet-response.dto");
/**
 * Snippet Response DTOs Unit Tests
 *
 * Testet:
 * - Response Schemas validieren korrekte Datenstruktur
 * - Type inference funktioniert
 * - Nested schemas funktionieren
 */
describe('Snippet Response DTOs', () => {
    describe('SnippetAuthorSchema', () => {
        it('should validate valid author data', () => {
            // Arrange
            const input = {
                id: '123e4567-e89b-12d3-a456-426614174000',
                username: 'testuser',
                avatarUrl: 'https://example.com/avatar.jpg',
            };
            // Act
            const result = snippet_response_dto_1.SnippetAuthorSchema.parse(input);
            // Assert
            expect(result.id).toBe(input.id);
            expect(result.username).toBe(input.username);
            expect(result.avatarUrl).toBe(input.avatarUrl);
        });
        it('should validate author with null avatarUrl', () => {
            // Arrange
            const input = {
                id: '123e4567-e89b-12d3-a456-426614174000',
                username: 'testuser',
                avatarUrl: null,
            };
            // Act
            const result = snippet_response_dto_1.SnippetAuthorSchema.parse(input);
            // Assert
            expect(result.avatarUrl).toBeNull();
        });
        it('should reject invalid UUID', () => {
            // Arrange
            const input = {
                id: 'not-a-uuid',
                username: 'testuser',
                avatarUrl: null,
            };
            // Act & Assert
            expect(() => snippet_response_dto_1.SnippetAuthorSchema.parse(input)).toThrow();
        });
    });
    describe('SnippetResponseSchema', () => {
        it('should validate complete snippet response', () => {
            // Arrange
            const input = {
                id: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Test Snippet',
                description: 'A test snippet',
                code: 'console.log("test");',
                language: 'javascript',
                userId: '123e4567-e89b-12d3-a456-426614174001',
                isPublic: true,
                viewCount: 42,
                createdAt: new Date('2026-01-01'),
                updatedAt: new Date('2026-01-02'),
            };
            // Act
            const result = snippet_response_dto_1.SnippetResponseSchema.parse(input);
            // Assert
            expect(result.id).toBe(input.id);
            expect(result.title).toBe(input.title);
            expect(result.description).toBe(input.description);
            expect(result.code).toBe(input.code);
            expect(result.language).toBe(input.language);
            expect(result.userId).toBe(input.userId);
            expect(result.isPublic).toBe(input.isPublic);
            expect(result.viewCount).toBe(input.viewCount);
        });
        it('should validate snippet with null description', () => {
            // Arrange
            const input = {
                id: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Test Snippet',
                description: null,
                code: 'code',
                language: 'python',
                userId: '123e4567-e89b-12d3-a456-426614174001',
                isPublic: false,
                viewCount: 0,
                createdAt: new Date(),
                updatedAt: new Date(),
            };
            // Act
            const result = snippet_response_dto_1.SnippetResponseSchema.parse(input);
            // Assert
            expect(result.description).toBeNull();
        });
    });
    describe('SnippetWithUserResponseSchema', () => {
        it('should validate snippet with user info', () => {
            // Arrange
            const input = {
                id: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Test Snippet',
                description: 'Test',
                code: 'code',
                language: 'typescript',
                userId: '123e4567-e89b-12d3-a456-426614174001',
                isPublic: true,
                viewCount: 10,
                createdAt: new Date(),
                updatedAt: new Date(),
                user: {
                    id: '123e4567-e89b-12d3-a456-426614174001',
                    username: 'author',
                    avatarUrl: null,
                },
            };
            // Act
            const result = snippet_response_dto_1.SnippetWithUserResponseSchema.parse(input);
            // Assert
            expect(result.user.username).toBe('author');
            expect(result.user.id).toBe(input.userId);
        });
    });
    describe('SnippetPreviewResponseSchema', () => {
        it('should validate snippet preview without code', () => {
            // Arrange
            const input = {
                id: '123e4567-e89b-12d3-a456-426614174000',
                title: 'Test Snippet',
                description: 'Test',
                language: 'rust',
                userId: '123e4567-e89b-12d3-a456-426614174001',
                isPublic: true,
                viewCount: 5,
                createdAt: new Date(),
                updatedAt: new Date(),
            };
            // Act
            const result = snippet_response_dto_1.SnippetPreviewResponseSchema.parse(input);
            // Assert
            expect(result.title).toBe(input.title);
            expect(result).not.toHaveProperty('code');
        });
    });
    describe('PaginationMetaSchema', () => {
        it('should validate pagination metadata', () => {
            // Arrange
            const input = {
                page: 1,
                limit: 10,
                total: 42,
                totalPages: 5,
                hasNextPage: true,
                hasPreviousPage: false,
            };
            // Act
            const result = snippet_response_dto_1.PaginationMetaSchema.parse(input);
            // Assert
            expect(result.page).toBe(1);
            expect(result.limit).toBe(10);
            expect(result.total).toBe(42);
            expect(result.totalPages).toBe(5);
            expect(result.hasNextPage).toBe(true);
            expect(result.hasPreviousPage).toBe(false);
        });
    });
    describe('PaginatedSnippetsResponseSchema', () => {
        it('should validate paginated snippets response', () => {
            // Arrange
            const input = {
                data: [
                    {
                        id: '123e4567-e89b-12d3-a456-426614174000',
                        title: 'Snippet 1',
                        description: null,
                        code: 'code1',
                        language: 'javascript',
                        userId: '123e4567-e89b-12d3-a456-426614174001',
                        isPublic: true,
                        viewCount: 1,
                        createdAt: new Date(),
                        updatedAt: new Date(),
                    },
                ],
                meta: {
                    page: 1,
                    limit: 10,
                    total: 1,
                    totalPages: 1,
                    hasNextPage: false,
                    hasPreviousPage: false,
                },
            };
            // Act
            const result = snippet_response_dto_1.PaginatedSnippetsResponseSchema.parse(input);
            // Assert
            expect(result.data).toHaveLength(1);
            expect(result.meta.total).toBe(1);
        });
        it('should validate empty paginated response', () => {
            // Arrange
            const input = {
                data: [],
                meta: {
                    page: 1,
                    limit: 10,
                    total: 0,
                    totalPages: 0,
                    hasNextPage: false,
                    hasPreviousPage: false,
                },
            };
            // Act
            const result = snippet_response_dto_1.PaginatedSnippetsResponseSchema.parse(input);
            // Assert
            expect(result.data).toHaveLength(0);
            expect(result.meta.total).toBe(0);
        });
    });
    describe('PaginatedSnippetPreviewsResponseSchema', () => {
        it('should validate paginated previews response', () => {
            // Arrange
            const input = {
                data: [
                    {
                        id: '123e4567-e89b-12d3-a456-426614174000',
                        title: 'Preview 1',
                        description: 'desc',
                        language: 'python',
                        userId: '123e4567-e89b-12d3-a456-426614174001',
                        isPublic: true,
                        viewCount: 10,
                        createdAt: new Date(),
                        updatedAt: new Date(),
                    },
                ],
                meta: {
                    page: 1,
                    limit: 10,
                    total: 1,
                    totalPages: 1,
                    hasNextPage: false,
                    hasPreviousPage: false,
                },
            };
            // Act
            const result = snippet_response_dto_1.PaginatedSnippetPreviewsResponseSchema.parse(input);
            // Assert
            expect(result.data).toHaveLength(1);
            expect(result.data[0]).not.toHaveProperty('code');
        });
    });
    describe('SnippetStatsResponseSchema', () => {
        it('should validate stats with all fields', () => {
            // Arrange
            const input = {
                total: 10,
                public: 7,
                private: 3,
                totalViews: 100,
                mostViewed: {
                    id: '123e4567-e89b-12d3-a456-426614174000',
                    title: 'Popular Snippet',
                    description: null,
                    code: 'code',
                    language: 'javascript',
                    userId: '123e4567-e89b-12d3-a456-426614174001',
                    isPublic: true,
                    viewCount: 50,
                    createdAt: new Date(),
                    updatedAt: new Date(),
                },
                latestSnippet: {
                    id: '123e4567-e89b-12d3-a456-426614174002',
                    title: 'Latest Snippet',
                    description: null,
                    code: 'code',
                    language: 'typescript',
                    userId: '123e4567-e89b-12d3-a456-426614174001',
                    isPublic: true,
                    viewCount: 0,
                    createdAt: new Date(),
                    updatedAt: new Date(),
                },
            };
            // Act
            const result = snippet_response_dto_1.SnippetStatsResponseSchema.parse(input);
            // Assert
            expect(result.total).toBe(10);
            expect(result.public).toBe(7);
            expect(result.private).toBe(3);
            expect(result.totalViews).toBe(100);
            expect(result.mostViewed?.title).toBe('Popular Snippet');
            expect(result.latestSnippet?.title).toBe('Latest Snippet');
        });
        it('should validate stats without optional snippets', () => {
            // Arrange
            const input = {
                total: 0,
                public: 0,
                private: 0,
                totalViews: 0,
            };
            // Act
            const result = snippet_response_dto_1.SnippetStatsResponseSchema.parse(input);
            // Assert
            expect(result.total).toBe(0);
            expect(result.mostViewed).toBeUndefined();
            expect(result.latestSnippet).toBeUndefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvcnVubmVyL3dvcmsvc25pcHBldGZvcmdlL3NuaXBwZXRmb3JnZS9hcHBzL2FwaS90ZXN0L3VuaXQvZHRvL3NuaXBwZXRzL3NuaXBwZXQtcmVzcG9uc2UuZHRvLnNwZWMudHMiLCJtYXBwaW5ncyI6IjtBQUFBLHNEQUFzRDs7QUFFdEQsb0dBU21FO0FBRW5FOzs7Ozs7O0dBT0c7QUFDSCxRQUFRLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFO0lBQ3JDLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxHQUFHLEVBQUU7UUFDbkMsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtZQUMzQyxVQUFVO1lBQ1YsTUFBTSxLQUFLLEdBQUc7Z0JBQ1osRUFBRSxFQUFFLHNDQUFzQztnQkFDMUMsUUFBUSxFQUFFLFVBQVU7Z0JBQ3BCLFNBQVMsRUFBRSxnQ0FBZ0M7YUFDNUMsQ0FBQztZQUVGLE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRywwQ0FBbUIsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFaEQsU0FBUztZQUNULE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNqQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxVQUFVO1lBQ1YsTUFBTSxLQUFLLEdBQUc7Z0JBQ1osRUFBRSxFQUFFLHNDQUFzQztnQkFDMUMsUUFBUSxFQUFFLFVBQVU7Z0JBQ3BCLFNBQVMsRUFBRSxJQUFJO2FBQ2hCLENBQUM7WUFFRixNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsMENB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LENBQUMsR0FBRyxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDekQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQ3pELFVBQVU7WUFDVixNQUFNLEtBQUssR0FBRztnQkFDWixLQUFLLEVBQUUsQ0FBQztnQkFDUixNQUFNLEVBQUUsQ0FBQztnQkFDVCxPQUFPLEVBQUUsQ0FBQztnQkFDVixVQUFVLEVBQUUsQ0FBQzthQUNkLENBQUM7WUFFRixNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsaURBQTBCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXZELFNBQVM7WUFDVCxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QixNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3JrL3NuaXBwZXRmb3JnZS9zbmlwcGV0Zm9yZ2UvYXBwcy9hcGkvdGVzdC91bml0L2R0by9zbmlwcGV0cy9zbmlwcGV0LXJlc3BvbnNlLmR0by5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHRlc3QvdW5pdC9kdG8vc25pcHBldHMvc25pcHBldC1yZXNwb25zZS5kdG8uc3BlYy50c1xuXG5pbXBvcnQge1xuICBTbmlwcGV0QXV0aG9yU2NoZW1hLFxuICBTbmlwcGV0UmVzcG9uc2VTY2hlbWEsXG4gIFNuaXBwZXRXaXRoVXNlclJlc3BvbnNlU2NoZW1hLFxuICBTbmlwcGV0UHJldmlld1Jlc3BvbnNlU2NoZW1hLFxuICBQYWdpbmF0aW9uTWV0YVNjaGVtYSxcbiAgUGFnaW5hdGVkU25pcHBldHNSZXNwb25zZVNjaGVtYSxcbiAgUGFnaW5hdGVkU25pcHBldFByZXZpZXdzUmVzcG9uc2VTY2hlbWEsXG4gIFNuaXBwZXRTdGF0c1Jlc3BvbnNlU2NoZW1hLFxufSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvbW9kdWxlcy9zbmlwcGV0cy9kdG8vc25pcHBldC1yZXNwb25zZS5kdG8nO1xuXG4vKipcbiAqIFNuaXBwZXQgUmVzcG9uc2UgRFRPcyBVbml0IFRlc3RzXG4gKlxuICogVGVzdGV0OlxuICogLSBSZXNwb25zZSBTY2hlbWFzIHZhbGlkaWVyZW4ga29ycmVrdGUgRGF0ZW5zdHJ1a3R1clxuICogLSBUeXBlIGluZmVyZW5jZSBmdW5rdGlvbmllcnRcbiAqIC0gTmVzdGVkIHNjaGVtYXMgZnVua3Rpb25pZXJlblxuICovXG5kZXNjcmliZSgnU25pcHBldCBSZXNwb25zZSBEVE9zJywgKCkgPT4ge1xuICBkZXNjcmliZSgnU25pcHBldEF1dGhvclNjaGVtYScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHZhbGlkIGF1dGhvciBkYXRhJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcbiAgICAgICAgdXNlcm5hbWU6ICd0ZXN0dXNlcicsXG4gICAgICAgIGF2YXRhclVybDogJ2h0dHBzOi8vZXhhbXBsZS5jb20vYXZhdGFyLmpwZycsXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFNuaXBwZXRBdXRob3JTY2hlbWEucGFyc2UoaW5wdXQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuaWQpLnRvQmUoaW5wdXQuaWQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51c2VybmFtZSkudG9CZShpbnB1dC51c2VybmFtZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmF2YXRhclVybCkudG9CZShpbnB1dC5hdmF0YXJVcmwpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhdXRob3Igd2l0aCBudWxsIGF2YXRhclVybCcsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHVzZXJuYW1lOiAndGVzdHVzZXInLFxuICAgICAgICBhdmF0YXJVcmw6IG51bGwsXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFNuaXBwZXRBdXRob3JTY2hlbWEucGFyc2UoaW5wdXQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuYXZhdGFyVXJsKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBVVUlEJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIGlkOiAnbm90LWEtdXVpZCcsXG4gICAgICAgIHVzZXJuYW1lOiAndGVzdHVzZXInLFxuICAgICAgICBhdmF0YXJVcmw6IG51bGwsXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGV4cGVjdCgoKSA9PiBTbmlwcGV0QXV0aG9yU2NoZW1hLnBhcnNlKGlucHV0KSkudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU25pcHBldFJlc3BvbnNlU2NoZW1hJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgY29tcGxldGUgc25pcHBldCByZXNwb25zZScsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHRpdGxlOiAnVGVzdCBTbmlwcGV0JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3Qgc25pcHBldCcsXG4gICAgICAgIGNvZGU6ICdjb25zb2xlLmxvZyhcInRlc3RcIik7JyxcbiAgICAgICAgbGFuZ3VhZ2U6ICdqYXZhc2NyaXB0JyxcbiAgICAgICAgdXNlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgaXNQdWJsaWM6IHRydWUsXG4gICAgICAgIHZpZXdDb3VudDogNDIsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoJzIwMjYtMDEtMDEnKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNi0wMS0wMicpLFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBTbmlwcGV0UmVzcG9uc2VTY2hlbWEucGFyc2UoaW5wdXQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuaWQpLnRvQmUoaW5wdXQuaWQpO1xuICAgICAgZXhwZWN0KHJlc3VsdC50aXRsZSkudG9CZShpbnB1dC50aXRsZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmRlc2NyaXB0aW9uKS50b0JlKGlucHV0LmRlc2NyaXB0aW9uKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuY29kZSkudG9CZShpbnB1dC5jb2RlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubGFuZ3VhZ2UpLnRvQmUoaW5wdXQubGFuZ3VhZ2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51c2VySWQpLnRvQmUoaW5wdXQudXNlcklkKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNQdWJsaWMpLnRvQmUoaW5wdXQuaXNQdWJsaWMpO1xuICAgICAgZXhwZWN0KHJlc3VsdC52aWV3Q291bnQpLnRvQmUoaW5wdXQudmlld0NvdW50KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgc25pcHBldCB3aXRoIG51bGwgZGVzY3JpcHRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICB0aXRsZTogJ1Rlc3QgU25pcHBldCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICBjb2RlOiAnY29kZScsXG4gICAgICAgIGxhbmd1YWdlOiAncHl0aG9uJyxcbiAgICAgICAgdXNlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgaXNQdWJsaWM6IGZhbHNlLFxuICAgICAgICB2aWV3Q291bnQ6IDAsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBTbmlwcGV0UmVzcG9uc2VTY2hlbWEucGFyc2UoaW5wdXQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQuZGVzY3JpcHRpb24pLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbmlwcGV0V2l0aFVzZXJSZXNwb25zZVNjaGVtYScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHNuaXBwZXQgd2l0aCB1c2VyIGluZm8nLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICB0aXRsZTogJ1Rlc3QgU25pcHBldCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCcsXG4gICAgICAgIGNvZGU6ICdjb2RlJyxcbiAgICAgICAgbGFuZ3VhZ2U6ICd0eXBlc2NyaXB0JyxcbiAgICAgICAgdXNlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgaXNQdWJsaWM6IHRydWUsXG4gICAgICAgIHZpZXdDb3VudDogMTAsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIHVzZXJuYW1lOiAnYXV0aG9yJyxcbiAgICAgICAgICBhdmF0YXJVcmw6IG51bGwsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFNuaXBwZXRXaXRoVXNlclJlc3BvbnNlU2NoZW1hLnBhcnNlKGlucHV0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnVzZXIudXNlcm5hbWUpLnRvQmUoJ2F1dGhvcicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51c2VyLmlkKS50b0JlKGlucHV0LnVzZXJJZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbmlwcGV0UHJldmlld1Jlc3BvbnNlU2NoZW1hJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgc25pcHBldCBwcmV2aWV3IHdpdGhvdXQgY29kZScsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgIHRpdGxlOiAnVGVzdCBTbmlwcGV0JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0JyxcbiAgICAgICAgbGFuZ3VhZ2U6ICdydXN0JyxcbiAgICAgICAgdXNlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgaXNQdWJsaWM6IHRydWUsXG4gICAgICAgIHZpZXdDb3VudDogNSxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFNuaXBwZXRQcmV2aWV3UmVzcG9uc2VTY2hlbWEucGFyc2UoaW5wdXQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQudGl0bGUpLnRvQmUoaW5wdXQudGl0bGUpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkubm90LnRvSGF2ZVByb3BlcnR5KCdjb2RlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQYWdpbmF0aW9uTWV0YVNjaGVtYScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHBhZ2luYXRpb24gbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgICAgcGFnZTogMSxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICB0b3RhbDogNDIsXG4gICAgICAgIHRvdGFsUGFnZXM6IDUsXG4gICAgICAgIGhhc05leHRQYWdlOiB0cnVlLFxuICAgICAgICBoYXNQcmV2aW91c1BhZ2U6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBQYWdpbmF0aW9uTWV0YVNjaGVtYS5wYXJzZShpbnB1dCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5wYWdlKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5saW1pdCkudG9CZSgxMCk7XG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsKS50b0JlKDQyKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxQYWdlcykudG9CZSg1KTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaGFzTmV4dFBhZ2UpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0Lmhhc1ByZXZpb3VzUGFnZSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQYWdpbmF0ZWRTbmlwcGV0c1Jlc3BvbnNlU2NoZW1hJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcGFnaW5hdGVkIHNuaXBwZXRzIHJlc3BvbnNlJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgICAgICAgICB0aXRsZTogJ1NuaXBwZXQgMScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgICAgIGNvZGU6ICdjb2RlMScsXG4gICAgICAgICAgICBsYW5ndWFnZTogJ2phdmFzY3JpcHQnLFxuICAgICAgICAgICAgdXNlcklkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcbiAgICAgICAgICAgIGlzUHVibGljOiB0cnVlLFxuICAgICAgICAgICAgdmlld0NvdW50OiAxLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICB0b3RhbFBhZ2VzOiAxLFxuICAgICAgICAgIGhhc05leHRQYWdlOiBmYWxzZSxcbiAgICAgICAgICBoYXNQcmV2aW91c1BhZ2U6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBQYWdpbmF0ZWRTbmlwcGV0c1Jlc3BvbnNlU2NoZW1hLnBhcnNlKGlucHV0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWV0YS50b3RhbCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgZW1wdHkgcGFnaW5hdGVkIHJlc3BvbnNlJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgICAgICBoYXNOZXh0UGFnZTogZmFsc2UsXG4gICAgICAgICAgaGFzUHJldmlvdXNQYWdlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gUGFnaW5hdGVkU25pcHBldHNSZXNwb25zZVNjaGVtYS5wYXJzZShpbnB1dCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC5kYXRhKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGEudG90YWwpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQYWdpbmF0ZWRTbmlwcGV0UHJldmlld3NSZXNwb25zZVNjaGVtYScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHBhZ2luYXRlZCBwcmV2aWV3cyByZXNwb25zZScsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICBkYXRhOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgICAgdGl0bGU6ICdQcmV2aWV3IDEnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdkZXNjJyxcbiAgICAgICAgICAgIGxhbmd1YWdlOiAncHl0aG9uJyxcbiAgICAgICAgICAgIHVzZXJJZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXG4gICAgICAgICAgICBpc1B1YmxpYzogdHJ1ZSxcbiAgICAgICAgICAgIHZpZXdDb3VudDogMTAsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICAgIHRvdGFsOiAxLFxuICAgICAgICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgICAgICAgaGFzTmV4dFBhZ2U6IGZhbHNlLFxuICAgICAgICAgIGhhc1ByZXZpb3VzUGFnZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFBhZ2luYXRlZFNuaXBwZXRQcmV2aWV3c1Jlc3BvbnNlU2NoZW1hLnBhcnNlKGlucHV0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YVswXSkubm90LnRvSGF2ZVByb3BlcnR5KCdjb2RlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTbmlwcGV0U3RhdHNSZXNwb25zZVNjaGVtYScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHN0YXRzIHdpdGggYWxsIGZpZWxkcycsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgICB0b3RhbDogMTAsXG4gICAgICAgIHB1YmxpYzogNyxcbiAgICAgICAgcHJpdmF0ZTogMyxcbiAgICAgICAgdG90YWxWaWV3czogMTAwLFxuICAgICAgICBtb3N0Vmlld2VkOiB7XG4gICAgICAgICAgaWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnLFxuICAgICAgICAgIHRpdGxlOiAnUG9wdWxhciBTbmlwcGV0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgICBjb2RlOiAnY29kZScsXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdqYXZhc2NyaXB0JyxcbiAgICAgICAgICB1c2VySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGlzUHVibGljOiB0cnVlLFxuICAgICAgICAgIHZpZXdDb3VudDogNTAsXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgICAgbGF0ZXN0U25pcHBldDoge1xuICAgICAgICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAyJyxcbiAgICAgICAgICB0aXRsZTogJ0xhdGVzdCBTbmlwcGV0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgICBjb2RlOiAnY29kZScsXG4gICAgICAgICAgbGFuZ3VhZ2U6ICd0eXBlc2NyaXB0JyxcbiAgICAgICAgICB1c2VySWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxuICAgICAgICAgIGlzUHVibGljOiB0cnVlLFxuICAgICAgICAgIHZpZXdDb3VudDogMCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBTbmlwcGV0U3RhdHNSZXNwb25zZVNjaGVtYS5wYXJzZShpbnB1dCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdC50b3RhbCkudG9CZSgxMCk7XG4gICAgICBleHBlY3QocmVzdWx0LnB1YmxpYykudG9CZSg3KTtcbiAgICAgIGV4cGVjdChyZXN1bHQucHJpdmF0ZSkudG9CZSgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudG90YWxWaWV3cykudG9CZSgxMDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tb3N0Vmlld2VkPy50aXRsZSkudG9CZSgnUG9wdWxhciBTbmlwcGV0Jyk7XG4gICAgICBleHBlY3QocmVzdWx0LmxhdGVzdFNuaXBwZXQ/LnRpdGxlKS50b0JlKCdMYXRlc3QgU25pcHBldCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBzdGF0cyB3aXRob3V0IG9wdGlvbmFsIHNuaXBwZXRzJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW5wdXQgPSB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICBwdWJsaWM6IDAsXG4gICAgICAgIHByaXZhdGU6IDAsXG4gICAgICAgIHRvdGFsVmlld3M6IDAsXG4gICAgICB9O1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFNuaXBwZXRTdGF0c1Jlc3BvbnNlU2NoZW1hLnBhcnNlKGlucHV0KTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LnRvdGFsKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tb3N0Vmlld2VkKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmxhdGVzdFNuaXBwZXQpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==