{"file":"/home/runner/work/snippetforge/snippetforge/apps/api/src/modules/snippets/dto/update-snippet.dto.ts","mappings":";AAAA,iDAAiD;;;AAgFjD,4DAEC;AAMD,oEAEC;AAxFD,6BAAwB;AAExB;;;;;;;;;;;;;;;;;;;GAmBG;AAEU,QAAA,mBAAmB,GAAG,OAAC,CAAC,MAAM,CAAC;IAC1C,KAAK,EAAE,OAAC;SACL,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC;SAC/B,GAAG,CAAC,GAAG,EAAE,sCAAsC,CAAC;SAChD,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;SAC9B,QAAQ,EAAE;IAEb,WAAW,EAAE,OAAC;SACX,MAAM,EAAE;SACR,GAAG,CAAC,IAAI,EAAE,6CAA6C,CAAC;SACxD,QAAQ,EAAE;SACV,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;SAC5C,QAAQ,EAAE;IAEb,IAAI,EAAE,OAAC;SACJ,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,EAAE,sBAAsB,CAAC;SAC9B,GAAG,CAAC,KAAK,EAAE,uCAAuC,CAAC;SACnD,QAAQ,EAAE;IAEb,QAAQ,EAAE,OAAC;SACR,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,EAAE,0BAA0B,CAAC;SAClC,GAAG,CAAC,EAAE,EAAE,wCAAwC,CAAC;SACjD,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC;SAC5C,MAAM,CACL,CAAC,GAAG,EAAE,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,EACjC,sDAAsD,CACvD;SACA,QAAQ,EAAE;IAEb,QAAQ,EAAE,OAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE;CACjC,CAAC,CAAC;AAkBH;;;GAGG;AACH,SAAgB,wBAAwB,CAAC,IAAa;IACpD,OAAO,2BAAmB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACzC,CAAC;AAED;;;GAGG;AACH,SAAgB,4BAA4B,CAAC,IAAa;IACxD,OAAO,2BAAmB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;AAC7C,CAAC","names":[],"sources":["/home/runner/work/snippetforge/snippetforge/apps/api/src/modules/snippets/dto/update-snippet.dto.ts"],"sourcesContent":["// src/modules/snippets/dto/update-snippet.dto.ts\n\nimport { z } from 'zod';\n\n/**\n * Update Snippet DTO - Validation für Snippet-Updates\n *\n * WARUM partial statt separate Fields?\n * 1. DRY: Keine Duplizierung der Validation Rules\n * 2. Consistency: Update verwendet gleiche Rules wie Create\n * 3. Flexibility: Frontend kann beliebige Felder updaten\n * 4. Type Safety: TypeScript prüft alle möglichen Updates\n *\n * VALIDATION RULES:\n * - Alle Felder sind optional (partial update)\n * - Aber wenn vorhanden, gelten die gleichen Rules wie bei Create\n * - title: 1-200 Zeichen\n * - description: Max 1000 Zeichen\n * - code: 1-50000 Zeichen\n * - language: Valides Format\n * - isPublic: Boolean\n *\n * WICHTIG: User kann nur eigene Snippets updaten (wird im Service geprüft)\n */\n\nexport const UpdateSnippetSchema = z.object({\n  title: z\n    .string()\n    .min(1, 'Title cannot be empty')\n    .max(200, 'Title must be at most 200 characters')\n    .transform((val) => val.trim())\n    .optional(),\n\n  description: z\n    .string()\n    .max(1000, 'Description must be at most 1000 characters')\n    .nullable()\n    .transform((val) => (val ? val.trim() : val))\n    .optional(),\n\n  code: z\n    .string()\n    .min(1, 'Code cannot be empty')\n    .max(50000, 'Code must be at most 50000 characters')\n    .optional(),\n\n  language: z\n    .string()\n    .min(1, 'Language cannot be empty')\n    .max(50, 'Language must be at most 50 characters')\n    .transform((val) => val.toLowerCase().trim())\n    .refine(\n      (val) => /^[a-z0-9-]+$/.test(val),\n      'Language must be lowercase alphanumeric with hyphens',\n    )\n    .optional(),\n\n  isPublic: z.boolean().optional(),\n});\n\n/**\n * TypeScript Type aus Schema generiert\n *\n * Equivalent zu:\n * interface UpdateSnippetDto {\n *   title?: string\n *   description?: string | null\n *   code?: string\n *   language?: string\n *   isPublic?: boolean\n * }\n *\n * ABER: Automatisch synchron mit Validation Rules!\n */\nexport type UpdateSnippetDto = z.infer<typeof UpdateSnippetSchema>;\n\n/**\n * Validation Function\n * Kann auch außerhalb von NestJS verwendet werden\n */\nexport function validateUpdateSnippetDto(data: unknown): UpdateSnippetDto {\n  return UpdateSnippetSchema.parse(data);\n}\n\n/**\n * Safe Validation (wirft keinen Error)\n * Gibt Result-Object zurück\n */\nexport function safeValidateUpdateSnippetDto(data: unknown) {\n  return UpdateSnippetSchema.safeParse(data);\n}\n"],"version":3}