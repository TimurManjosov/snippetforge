{"file":"/home/runner/work/snippetforge/snippetforge/apps/api/test/unit/services/snippets.service.spec.ts","mappings":"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","names":[],"sources":["/home/runner/work/snippetforge/snippetforge/apps/api/test/unit/services/snippets.service.spec.ts"],"sourcesContent":["// test/unit/services/snippets.service.spec.ts\n\nimport {\n  BadRequestException,\n  ForbiddenException,\n  NotFoundException,\n} from '@nestjs/common';\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { SnippetsRepository } from '../../../src/modules/snippets/snippets.repository';\nimport { SnippetsService } from '../../../src/modules/snippets/snippets.service';\nimport {\n  createMockSnippet,\n  createMockSnippetsRepository,\n  type MockSnippetsRepository,\n} from '../../mocks';\n\n/**\n * SnippetsService Unit Tests\n *\n * Tests:\n * - Business Logic (Ownership, Public/Private)\n * - Error Handling (NotFoundException, ForbiddenException)\n * - Input Validation\n * - Orchestration of Repository Calls\n */\ndescribe('SnippetsService', () => {\n  let service: SnippetsService;\n  let repository: MockSnippetsRepository;\n\n  const mockSnippet = createMockSnippet();\n  const ownerId = 'owner-user-id';\n  const otherUserId = 'other-user-id';\n\n  beforeEach(async () => {\n    repository = createMockSnippetsRepository();\n\n    const module: TestingModule = await Test.createTestingModule({\n      providers: [\n        SnippetsService,\n        {\n          provide: SnippetsRepository,\n          useValue: repository,\n        },\n      ],\n    }).compile();\n\n    service = module.get<SnippetsService>(SnippetsService);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  // ============================================================\n  // CREATE\n  // ============================================================\n\n  describe('create', () => {\n    it('should create a new snippet', async () => {\n      // Arrange\n      const dto = {\n        title: 'Test Snippet',\n        code: 'console.log(\"test\")',\n        language: 'javascript',\n      };\n      repository.create.mockResolvedValue(mockSnippet);\n\n      // Act\n      const result = await service.create(ownerId, dto);\n\n      // Assert\n      expect(result).toEqual(mockSnippet);\n      expect(repository.create).toHaveBeenCalledWith({\n        ...dto,\n        userId: ownerId,\n        isPublic: true, // Default\n      });\n    });\n\n    it('should use provided isPublic value', async () => {\n      // Arrange\n      const dto = {\n        title: 'Private Snippet',\n        code: 'console.log(\"secret\")',\n        language: 'javascript',\n        isPublic: false,\n      };\n      repository.create.mockResolvedValue(mockSnippet);\n\n      // Act\n      await service.create(ownerId, dto);\n\n      // Assert\n      expect(repository.create).toHaveBeenCalledWith(\n        expect.objectContaining({ isPublic: false }),\n      );\n    });\n\n    it('should throw BadRequestException for empty code', async () => {\n      // Arrange\n      const dto = {\n        title: 'Test',\n        code: '   ', // Only whitespace\n        language: 'javascript',\n      };\n\n      // Act & Assert\n      await expect(service.create(ownerId, dto)).rejects.toThrow(\n        BadRequestException,\n      );\n      await expect(service.create(ownerId, dto)).rejects.toThrow(\n        'Code cannot be empty or contain only whitespace',\n      );\n    });\n\n    it('should throw BadRequestException for code > 50000 chars', async () => {\n      // Arrange\n      const dto = {\n        title: 'Test',\n        code: 'x'.repeat(50001),\n        language: 'javascript',\n      };\n\n      // Act & Assert\n      await expect(service.create(ownerId, dto)).rejects.toThrow(\n        BadRequestException,\n      );\n      await expect(service.create(ownerId, dto)).rejects.toThrow(\n        'Code exceeds maximum length of 50,000 characters',\n      );\n    });\n\n    it('should throw BadRequestException for empty title', async () => {\n      // Arrange\n      const dto = {\n        title: '   ', // Only whitespace\n        code: 'console.log(\"test\")',\n        language: 'javascript',\n      };\n\n      // Act & Assert\n      await expect(service.create(ownerId, dto)).rejects.toThrow(\n        BadRequestException,\n      );\n      await expect(service.create(ownerId, dto)).rejects.toThrow(\n        'Title cannot be empty or contain only whitespace',\n      );\n    });\n  });\n\n  // ============================================================\n  // READ - SINGLE\n  // ============================================================\n\n  describe('findById', () => {\n    it('should return public snippet without userId', async () => {\n      // Arrange\n      const publicSnippet = createMockSnippet({ isPublic: true });\n      repository.findById.mockResolvedValue(publicSnippet);\n\n      // Act\n      const result = await service.findById('snippet-id');\n\n      // Assert\n      expect(result).toEqual(publicSnippet);\n    });\n\n    it('should return public snippet with any userId', async () => {\n      // Arrange\n      const publicSnippet = createMockSnippet({\n        isPublic: true,\n        userId: ownerId,\n      });\n      repository.findById.mockResolvedValue(publicSnippet);\n\n      // Act\n      const result = await service.findById('snippet-id', otherUserId);\n\n      // Assert\n      expect(result).toEqual(publicSnippet);\n    });\n\n    it('should return private snippet for owner', async () => {\n      // Arrange\n      const privateSnippet = createMockSnippet({\n        isPublic: false,\n        userId: ownerId,\n      });\n      repository.findById.mockResolvedValue(privateSnippet);\n\n      // Act\n      const result = await service.findById('snippet-id', ownerId);\n\n      // Assert\n      expect(result).toEqual(privateSnippet);\n    });\n\n    it('should throw ForbiddenException for private snippet of other user', async () => {\n      // Arrange\n      const privateSnippet = createMockSnippet({\n        isPublic: false,\n        userId: ownerId,\n      });\n      repository.findById.mockResolvedValue(privateSnippet);\n\n      // Act & Assert\n      await expect(service.findById('snippet-id', otherUserId)).rejects.toThrow(\n        ForbiddenException,\n      );\n      await expect(service.findById('snippet-id', otherUserId)).rejects.toThrow(\n        'You do not have access to this snippet',\n      );\n    });\n\n    it('should throw NotFoundException when snippet not found', async () => {\n      // Arrange\n      repository.findById.mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(service.findById('nonexistent')).rejects.toThrow(\n        NotFoundException,\n      );\n      await expect(service.findById('nonexistent')).rejects.toThrow(\n        'Snippet with ID nonexistent not found',\n      );\n    });\n  });\n\n  describe('findByIdAndIncrementViews', () => {\n    it('should return snippet and increment views', async () => {\n      // Arrange\n      const publicSnippet = createMockSnippet({ isPublic: true });\n      repository.findById.mockResolvedValue(publicSnippet);\n      repository.incrementViewCount.mockResolvedValue(true);\n\n      // Act\n      const result = await service.findByIdAndIncrementViews('snippet-id');\n\n      // Assert\n      expect(result).toEqual(publicSnippet);\n      // incrementViewCount is fire-and-forget, so we can't reliably test it was called\n    });\n\n    it('should not fail if incrementViewCount fails', async () => {\n      // Arrange\n      const publicSnippet = createMockSnippet({ isPublic: true });\n      repository.findById.mockResolvedValue(publicSnippet);\n      repository.incrementViewCount.mockRejectedValue(new Error('DB Error'));\n\n      // Act - Should NOT throw\n      const result = await service.findByIdAndIncrementViews('snippet-id');\n\n      // Assert\n      expect(result).toEqual(publicSnippet);\n    });\n  });\n\n  // ============================================================\n  // READ - LISTS\n  // ============================================================\n\n  describe('findUserSnippets', () => {\n    it('should return user snippets', async () => {\n      // Arrange\n      const snippets = [mockSnippet];\n      repository.findByUserId.mockResolvedValue(snippets);\n\n      // Act\n      const result = await service.findUserSnippets(ownerId);\n\n      // Assert\n      expect(result).toEqual(snippets);\n      expect(repository.findByUserId).toHaveBeenCalledWith(ownerId, 20);\n    });\n\n    it('should use custom limit', async () => {\n      // Arrange\n      repository.findByUserId.mockResolvedValue([]);\n\n      // Act\n      await service.findUserSnippets(ownerId, 50);\n\n      // Assert\n      expect(repository.findByUserId).toHaveBeenCalledWith(ownerId, 50);\n    });\n  });\n\n  describe('findPublicSnippets', () => {\n    it('should return paginated public snippets', async () => {\n      // Arrange\n      const paginatedResult = {\n        data: [mockSnippet],\n        meta: {\n          page: 1,\n          limit: 20,\n          total: 100,\n          totalPages: 5,\n          hasNextPage: true,\n          hasPreviousPage: false,\n        },\n      };\n      repository.findPublic.mockResolvedValue(paginatedResult);\n\n      // Act\n      const result = await service.findPublicSnippets(1, 20);\n\n      // Assert\n      expect(result).toEqual(paginatedResult);\n    });\n\n    it('should enforce minimum page of 1', async () => {\n      // Arrange\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      repository.findPublic.mockResolvedValue({ data: [], meta: {} as any });\n\n      // Act\n      await service.findPublicSnippets(0, 20);\n\n      // Assert\n      expect(repository.findPublic).toHaveBeenCalledWith(1, 20);\n    });\n\n    it('should enforce maximum limit of 100', async () => {\n      // Arrange\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      repository.findPublic.mockResolvedValue({ data: [], meta: {} as any });\n\n      // Act\n      await service.findPublicSnippets(1, 200);\n\n      // Assert\n      expect(repository.findPublic).toHaveBeenCalledWith(1, 100);\n    });\n  });\n\n  // ============================================================\n  // UPDATE\n  // ============================================================\n\n  describe('update', () => {\n    it('should update own snippet', async () => {\n      // Arrange\n      const existingSnippet = createMockSnippet({ userId: ownerId });\n      const updatedSnippet = { ...existingSnippet, title: 'Updated' };\n      repository.findById.mockResolvedValue(existingSnippet);\n      repository.update.mockResolvedValue(updatedSnippet);\n\n      // Act\n      const result = await service.update('snippet-id', ownerId, 'USER', {\n        title: 'Updated',\n      });\n\n      // Assert\n      expect(result.title).toBe('Updated');\n      expect(repository.update).toHaveBeenCalledWith('snippet-id', {\n        title: 'Updated',\n      });\n    });\n\n    it('should throw ForbiddenException when updating other user snippet', async () => {\n      // Arrange\n      const existingSnippet = createMockSnippet({ userId: ownerId });\n      repository.findById.mockResolvedValue(existingSnippet);\n\n      // Act & Assert\n      await expect(\n        service.update('snippet-id', otherUserId, 'USER', { title: 'Updated' }),\n      ).rejects.toThrow(ForbiddenException);\n      await expect(\n        service.update('snippet-id', otherUserId, 'USER', { title: 'Updated' }),\n      ).rejects.toThrow('You can only modify your own snippets');\n    });\n\n    it('should allow ADMIN to update any snippet', async () => {\n      // Arrange\n      const existingSnippet = createMockSnippet({ userId: ownerId });\n      const updatedSnippet = { ...existingSnippet, title: 'Admin Updated' };\n      repository.findById.mockResolvedValue(existingSnippet);\n      repository.update.mockResolvedValue(updatedSnippet);\n\n      // Act\n      const result = await service.update('snippet-id', otherUserId, 'ADMIN', {\n        title: 'Admin Updated',\n      });\n\n      // Assert\n      expect(result.title).toBe('Admin Updated');\n    });\n\n    it('should throw NotFoundException when snippet not found', async () => {\n      // Arrange\n      repository.findById.mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(\n        service.update('nonexistent', ownerId, 'USER', { title: 'Updated' }),\n      ).rejects.toThrow(NotFoundException);\n    });\n\n    it('should validate new data', async () => {\n      // Arrange\n      const existingSnippet = createMockSnippet({ userId: ownerId });\n      repository.findById.mockResolvedValue(existingSnippet);\n\n      // Act & Assert - Empty title\n      await expect(\n        service.update('snippet-id', ownerId, 'USER', { title: '   ' }),\n      ).rejects.toThrow(BadRequestException);\n    });\n  });\n\n  describe('togglePublic', () => {\n    it('should toggle public to private', async () => {\n      // Arrange\n      const publicSnippet = createMockSnippet({\n        userId: ownerId,\n        isPublic: true,\n      });\n      const privateSnippet = { ...publicSnippet, isPublic: false };\n      repository.findById.mockResolvedValue(publicSnippet);\n      repository.update.mockResolvedValue(privateSnippet);\n\n      // Act\n      const result = await service.togglePublic('snippet-id', ownerId, 'USER');\n\n      // Assert\n      expect(result.isPublic).toBe(false);\n      expect(repository.update).toHaveBeenCalledWith('snippet-id', {\n        isPublic: false,\n      });\n    });\n\n    it('should toggle private to public', async () => {\n      // Arrange\n      const privateSnippet = createMockSnippet({\n        userId: ownerId,\n        isPublic: false,\n      });\n      const publicSnippet = { ...privateSnippet, isPublic: true };\n      repository.findById.mockResolvedValue(privateSnippet);\n      repository.update.mockResolvedValue(publicSnippet);\n\n      // Act\n      const result = await service.togglePublic('snippet-id', ownerId, 'USER');\n\n      // Assert\n      expect(result.isPublic).toBe(true);\n    });\n\n    it('should throw ForbiddenException for other user', async () => {\n      // Arrange\n      const snippet = createMockSnippet({ userId: ownerId });\n      repository.findById.mockResolvedValue(snippet);\n\n      // Act & Assert\n      await expect(\n        service.togglePublic('snippet-id', otherUserId, 'USER'),\n      ).rejects.toThrow(ForbiddenException);\n    });\n  });\n\n  // ============================================================\n  // DELETE\n  // ============================================================\n\n  describe('delete', () => {\n    it('should delete own snippet', async () => {\n      // Arrange\n      const snippet = createMockSnippet({ userId: ownerId });\n      repository.findById.mockResolvedValue(snippet);\n      repository.delete.mockResolvedValue(true);\n\n      // Act\n      await service.delete('snippet-id', ownerId, 'USER');\n\n      // Assert\n      expect(repository.delete).toHaveBeenCalledWith('snippet-id');\n    });\n\n    it('should throw ForbiddenException when deleting other user snippet', async () => {\n      // Arrange\n      const snippet = createMockSnippet({ userId: ownerId });\n      repository.findById.mockResolvedValue(snippet);\n\n      // Act & Assert\n      await expect(\n        service.delete('snippet-id', otherUserId, 'USER'),\n      ).rejects.toThrow(ForbiddenException);\n      await expect(\n        service.delete('snippet-id', otherUserId, 'USER'),\n      ).rejects.toThrow('You can only delete your own snippets');\n    });\n\n    it('should allow ADMIN to delete any snippet', async () => {\n      // Arrange\n      const snippet = createMockSnippet({ userId: ownerId });\n      repository.findById.mockResolvedValue(snippet);\n      repository.delete.mockResolvedValue(true);\n\n      // Act\n      await service.delete('snippet-id', otherUserId, 'ADMIN');\n\n      // Assert\n      expect(repository.delete).toHaveBeenCalledWith('snippet-id');\n    });\n\n    it('should throw NotFoundException when snippet not found', async () => {\n      // Arrange\n      repository.findById.mockResolvedValue(null);\n\n      // Act & Assert\n      await expect(\n        service.delete('nonexistent', ownerId, 'USER'),\n      ).rejects.toThrow(NotFoundException);\n    });\n  });\n\n  // ============================================================\n  // STATISTICS\n  // ============================================================\n\n  describe('getUserStats', () => {\n    it('should return user statistics', async () => {\n      // Arrange\n      const stats = {\n        total: 10,\n        public: 7,\n        private: 3,\n        totalViews: 150,\n        mostViewed: mockSnippet,\n        latestSnippet: mockSnippet,\n      };\n      repository.getUserStats.mockResolvedValue(stats);\n\n      // Act\n      const result = await service.getUserStats(ownerId);\n\n      // Assert\n      expect(result).toEqual(stats);\n    });\n  });\n\n  describe('countUserSnippets', () => {\n    it('should return count of user snippets', async () => {\n      // Arrange\n      repository.countByUserId.mockResolvedValue(42);\n\n      // Act\n      const result = await service.countUserSnippets(ownerId);\n\n      // Assert\n      expect(result).toBe(42);\n    });\n  });\n});\n"],"version":3}