bf0f4aca8ec542177a4ea2aa95667918
"use strict";
// test/setup/jest.setup.ts
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Jest Global Setup
 *
 * Wird VOR jedem Test-File ausgeführt.
 * Hier konfigurieren wir globale Test-Einstellungen.
 */
// ========================================
// ENVIRONMENT VARIABLES
// ========================================
// Test-spezifische Environment Variables
process.env.NODE_ENV = 'test';
process.env.JWT_SECRET =
    'test-secret-key-for-testing-only-min-32-characters-long';
process.env.JWT_EXPIRES_IN = '15m';
process.env.DATABASE_URL =
    'postgresql://snippetforge:dev_password@localhost:5432/snippetforge';
// ========================================
// GLOBAL MOCKS
// ========================================
// Console Mocks (optional - reduziert Noise in Test Output)
// Auskommentieren wenn Debug-Output benötigt wird
// global.console = {
//   ... console,
//   log: jest. fn(),
//   debug: jest.fn(),
//   info: jest.fn(),
//   warn: jest.fn(),
//   error: jest.fn(),
// }
// ========================================
// CUSTOM MATCHERS
// ========================================
// Erweiterte Expect-Matcher (optional)
expect.extend({
    /**
     * Prüft ob ein Objekt eine UUID enthält
     */
    toBeUUID(received) {
        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
        const pass = uuidRegex.test(received);
        return {
            pass,
            message: () => pass
                ? `Expected ${received} not to be a valid UUID`
                : `Expected ${received} to be a valid UUID`,
        };
    },
    /**
     * Prüft ob ein String ein JWT Token ist
     */
    toBeJWT(received) {
        const jwtRegex = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;
        const pass = jwtRegex.test(received);
        return {
            pass,
            message: () => pass
                ? `Expected ${received} not to be a JWT token`
                : `Expected ${received} to be a JWT token`,
        };
    },
});
// ========================================
// GLOBAL TEST UTILITIES
// ========================================
// Erhöhe Timeout für langsame Tests
jest.setTimeout(10000);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcdGVzdFxcc2V0dXBcXGplc3Quc2V0dXAudHMiLCJtYXBwaW5ncyI6IjtBQUFBLDJCQUEyQjs7QUFFM0I7Ozs7O0dBS0c7QUFFSCwyQ0FBMkM7QUFDM0Msd0JBQXdCO0FBQ3hCLDJDQUEyQztBQUUzQyx5Q0FBeUM7QUFDekMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO0FBQzlCLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVTtJQUNwQix5REFBeUQsQ0FBQztBQUM1RCxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7QUFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZO0lBQ3RCLG9FQUFvRSxDQUFDO0FBRXZFLDJDQUEyQztBQUMzQyxlQUFlO0FBQ2YsMkNBQTJDO0FBRTNDLDREQUE0RDtBQUM1RCxrREFBa0Q7QUFDbEQscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixxQkFBcUI7QUFDckIsc0JBQXNCO0FBQ3RCLHFCQUFxQjtBQUNyQixxQkFBcUI7QUFDckIsc0JBQXNCO0FBQ3RCLElBQUk7QUFFSiwyQ0FBMkM7QUFDM0Msa0JBQWtCO0FBQ2xCLDJDQUEyQztBQUUzQyx1Q0FBdUM7QUFDdkMsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNaOztPQUVHO0lBQ0gsUUFBUSxDQUFDLFFBQWdCO1FBQ3ZCLE1BQU0sU0FBUyxHQUNiLHdFQUF3RSxDQUFDO1FBQzNFLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFdEMsT0FBTztZQUNMLElBQUk7WUFDSixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQ1osSUFBSTtnQkFDRixDQUFDLENBQUMsWUFBWSxRQUFRLHlCQUF5QjtnQkFDL0MsQ0FBQyxDQUFDLFlBQVksUUFBUSxxQkFBcUI7U0FDaEQsQ0FBQztJQUNKLENBQUM7SUFFRDs7T0FFRztJQUNILE9BQU8sQ0FBQyxRQUFnQjtRQUN0QixNQUFNLFFBQVEsR0FBRyxrREFBa0QsQ0FBQztRQUNwRSxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRXJDLE9BQU87WUFDTCxJQUFJO1lBQ0osT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUNaLElBQUk7Z0JBQ0YsQ0FBQyxDQUFDLFlBQVksUUFBUSx3QkFBd0I7Z0JBQzlDLENBQUMsQ0FBQyxZQUFZLFFBQVEsb0JBQW9CO1NBQy9DLENBQUM7SUFDSixDQUFDO0NBQ0YsQ0FBQyxDQUFDO0FBVUgsMkNBQTJDO0FBQzNDLHdCQUF3QjtBQUN4QiwyQ0FBMkM7QUFFM0Msb0NBQW9DO0FBQ3BDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcdGVzdFxcc2V0dXBcXGplc3Quc2V0dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGVzdC9zZXR1cC9qZXN0LnNldHVwLnRzXHJcblxyXG4vKipcclxuICogSmVzdCBHbG9iYWwgU2V0dXBcclxuICpcclxuICogV2lyZCBWT1IgamVkZW0gVGVzdC1GaWxlIGF1c2dlZsO8aHJ0LlxyXG4gKiBIaWVyIGtvbmZpZ3VyaWVyZW4gd2lyIGdsb2JhbGUgVGVzdC1FaW5zdGVsbHVuZ2VuLlxyXG4gKi9cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRU5WSVJPTk1FTlQgVkFSSUFCTEVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIFRlc3Qtc3BlemlmaXNjaGUgRW52aXJvbm1lbnQgVmFyaWFibGVzXHJcbnByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ3Rlc3QnO1xyXG5wcm9jZXNzLmVudi5KV1RfU0VDUkVUID1cclxuICAndGVzdC1zZWNyZXQta2V5LWZvci10ZXN0aW5nLW9ubHktbWluLTMyLWNoYXJhY3RlcnMtbG9uZyc7XHJcbnByb2Nlc3MuZW52LkpXVF9FWFBJUkVTX0lOID0gJzE1bSc7XHJcbnByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCA9XHJcbiAgJ3Bvc3RncmVzcWw6Ly9zbmlwcGV0Zm9yZ2U6ZGV2X3Bhc3N3b3JkQGxvY2FsaG9zdDo1NDMyL3NuaXBwZXRmb3JnZSc7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEdMT0JBTCBNT0NLU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyBDb25zb2xlIE1vY2tzIChvcHRpb25hbCAtIHJlZHV6aWVydCBOb2lzZSBpbiBUZXN0IE91dHB1dClcclxuLy8gQXVza29tbWVudGllcmVuIHdlbm4gRGVidWctT3V0cHV0IGJlbsO2dGlndCB3aXJkXHJcbi8vIGdsb2JhbC5jb25zb2xlID0ge1xyXG4vLyAgIC4uLiBjb25zb2xlLFxyXG4vLyAgIGxvZzogamVzdC4gZm4oKSxcclxuLy8gICBkZWJ1ZzogamVzdC5mbigpLFxyXG4vLyAgIGluZm86IGplc3QuZm4oKSxcclxuLy8gICB3YXJuOiBqZXN0LmZuKCksXHJcbi8vICAgZXJyb3I6IGplc3QuZm4oKSxcclxuLy8gfVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBDVVNUT00gTUFUQ0hFUlNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8gRXJ3ZWl0ZXJ0ZSBFeHBlY3QtTWF0Y2hlciAob3B0aW9uYWwpXHJcbmV4cGVjdC5leHRlbmQoe1xyXG4gIC8qKlxyXG4gICAqIFByw7xmdCBvYiBlaW4gT2JqZWt0IGVpbmUgVVVJRCBlbnRow6RsdFxyXG4gICAqL1xyXG4gIHRvQmVVVUlEKHJlY2VpdmVkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHV1aWRSZWdleCA9XHJcbiAgICAgIC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tNFswLTlhLWZdezN9LVs4OWFiXVswLTlhLWZdezN9LVswLTlhLWZdezEyfSQvaTtcclxuICAgIGNvbnN0IHBhc3MgPSB1dWlkUmVnZXgudGVzdChyZWNlaXZlZCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcGFzcyxcclxuICAgICAgbWVzc2FnZTogKCkgPT5cclxuICAgICAgICBwYXNzXHJcbiAgICAgICAgICA/IGBFeHBlY3RlZCAke3JlY2VpdmVkfSBub3QgdG8gYmUgYSB2YWxpZCBVVUlEYFxyXG4gICAgICAgICAgOiBgRXhwZWN0ZWQgJHtyZWNlaXZlZH0gdG8gYmUgYSB2YWxpZCBVVUlEYCxcclxuICAgIH07XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogUHLDvGZ0IG9iIGVpbiBTdHJpbmcgZWluIEpXVCBUb2tlbiBpc3RcclxuICAgKi9cclxuICB0b0JlSldUKHJlY2VpdmVkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGp3dFJlZ2V4ID0gL15bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXSokLztcclxuICAgIGNvbnN0IHBhc3MgPSBqd3RSZWdleC50ZXN0KHJlY2VpdmVkKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwYXNzLFxyXG4gICAgICBtZXNzYWdlOiAoKSA9PlxyXG4gICAgICAgIHBhc3NcclxuICAgICAgICAgID8gYEV4cGVjdGVkICR7cmVjZWl2ZWR9IG5vdCB0byBiZSBhIEpXVCB0b2tlbmBcclxuICAgICAgICAgIDogYEV4cGVjdGVkICR7cmVjZWl2ZWR9IHRvIGJlIGEgSldUIHRva2VuYCxcclxuICAgIH07XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBUeXBlU2NyaXB0IERla2xhcmF0aW9uIGbDvHIgQ3VzdG9tIE1hdGNoZXJzXHJcbmRlY2xhcmUgbW9kdWxlICdleHBlY3QnIHtcclxuICBpbnRlcmZhY2UgTWF0Y2hlcnM8Uj4ge1xyXG4gICAgdG9CZVVVSUQoKTogUjtcclxuICAgIHRvQmVKV1QoKTogUjtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gR0xPQkFMIFRFU1QgVVRJTElUSUVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIEVyaMO2aGUgVGltZW91dCBmw7xyIGxhbmdzYW1lIFRlc3RzXHJcbmplc3Quc2V0VGltZW91dCgxMDAwMCk7XHJcbiJdLCJ2ZXJzaW9uIjozfQ==