{"version":3,"names":["cov_17z1nwwa2h","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","exports","toSnippetPreview","calculatePaginationMeta","DEFAULT_SORT","sortBy","order","snippet","code","preview","total","page","limit","totalPages","Math","ceil","hasNextPage","hasPreviousPage"],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\modules\\snippets\\snippets.types.ts"],"sourcesContent":["// src/modules/snippets/snippets.types.ts\r\n\r\nimport { type NewSnippet, type Snippet } from '../../lib/db/schema';\r\n\r\n/**\r\n * Snippets Types - Domain Types für Snippet-Operations\r\n *\r\n * WARUM separate Types?\r\n * 1. Entkopplung: API-Layer kann andere Typen haben als DB-Layer\r\n * 2. Erweiterbarkeit: Wir können zusätzliche Felder hinzufügen (z.B. User-Info)\r\n * 3. Type-Safety: TypeScript prüft alle Transformationen\r\n * 4. Documentation: Types dokumentieren die Datenstruktur\r\n *\r\n * CLEAN CODE REGEL #1: Domain-Driven Design\r\n * - Types repräsentieren Business-Konzepte, nicht DB-Tabellen\r\n */\r\n\r\n// ============================================================\r\n// BASIC TYPES (Re-export from Schema)\r\n// ============================================================\r\n\r\n/**\r\n * Snippet - Vollständiges Snippet aus DB\r\n * Enthält alle Felder inklusive Timestamps\r\n */\r\nexport type { NewSnippet, Snippet };\r\n\r\n// ============================================================\r\n// EXTENDED TYPES\r\n// ============================================================\r\n\r\n/**\r\n * Snippet mit User-Information (für API Responses)\r\n *\r\n * Wird später mit JOIN geholt wenn wir User-Daten anzeigen wollen\r\n * Beispiel: Snippet-Liste zeigt Author-Name\r\n */\r\nexport interface SnippetWithUser extends Snippet {\r\n  user: {\r\n    id: string;\r\n    username: string;\r\n    avatarUrl: string | null;\r\n  };\r\n}\r\n\r\n/**\r\n * Snippet ohne Code (für Listen-Ansichten)\r\n *\r\n * PERFORMANCE REGEL #3: Select only needed columns\r\n * Code kann 50KB groß sein - für Listen brauchen wir das nicht!\r\n */\r\nexport interface SnippetPreview {\r\n  id: string;\r\n  title: string;\r\n  description: string | null;\r\n  language: string;\r\n  userId: string;\r\n  isPublic: boolean;\r\n  viewCount: number;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n}\r\n\r\n// ============================================================\r\n// STATISTICS TYPES\r\n// ============================================================\r\n\r\n/**\r\n * Snippet Statistics für User-Dashboard\r\n *\r\n * Zeigt Übersicht über alle Snippets eines Users\r\n */\r\nexport interface SnippetStats {\r\n  /** Gesamtanzahl Snippets */\r\n  total: number;\r\n\r\n  /** Anzahl öffentlicher Snippets */\r\n  public: number;\r\n\r\n  /** Anzahl privater Snippets */\r\n  private: number;\r\n\r\n  /** Summe aller Views */\r\n  totalViews: number;\r\n\r\n  /** Meist-angesehener Snippet (optional) */\r\n  mostViewed?: Snippet;\r\n\r\n  /** Zuletzt erstellter Snippet (optional) */\r\n  latestSnippet?: Snippet;\r\n}\r\n\r\n/**\r\n * Language Statistics\r\n * Zeigt welche Programmiersprachen am häufigsten verwendet werden\r\n */\r\nexport interface LanguageStats {\r\n  language: string;\r\n  count: number;\r\n  percentage: number;\r\n}\r\n\r\n// ============================================================\r\n// PAGINATION TYPES\r\n// ============================================================\r\n\r\n/**\r\n * Pagination Metadata\r\n *\r\n * PERFORMANCE REGEL #2: Pagination\r\n * Enthält alle Infos die Frontend für Pagination braucht\r\n */\r\nexport interface PaginationMeta {\r\n  /** Aktuelle Seite (1-indexed) */\r\n  page: number;\r\n\r\n  /** Items pro Seite */\r\n  limit: number;\r\n\r\n  /** Gesamtanzahl Items */\r\n  total: number;\r\n\r\n  /** Gesamtanzahl Seiten */\r\n  totalPages: number;\r\n\r\n  /** Gibt es eine nächste Seite? */\r\n  hasNextPage: boolean;\r\n\r\n  /** Gibt es eine vorherige Seite? */\r\n  hasPreviousPage: boolean;\r\n}\r\n\r\n/**\r\n * Paginated Response\r\n * Standard-Format für paginierte Listen\r\n */\r\nexport interface PaginatedSnippets {\r\n  data: Snippet[];\r\n  meta: PaginationMeta;\r\n}\r\n\r\n/**\r\n * Paginated Previews (ohne Code)\r\n * Für Listen-Ansichten\r\n */\r\nexport interface PaginatedSnippetPreviews {\r\n  data: SnippetPreview[];\r\n  meta: PaginationMeta;\r\n}\r\n\r\n// ============================================================\r\n// FILTER & SORT TYPES\r\n// ============================================================\r\n\r\n/**\r\n * Snippet Filter Options\r\n * Alle möglichen Filter-Parameter für Snippet-Suche\r\n */\r\nexport interface SnippetFilters {\r\n  /** Filter nach User ID */\r\n  userId?: string;\r\n\r\n  /** Filter nach Programmiersprache */\r\n  language?: string;\r\n\r\n  /** Filter nach Sichtbarkeit */\r\n  isPublic?: boolean;\r\n\r\n  /** Volltextsuche (Title + Description) */\r\n  search?: string;\r\n\r\n  /** Filter nach Erstellungsdatum (ab) */\r\n  createdAfter?: Date;\r\n\r\n  /** Filter nach Erstellungsdatum (bis) */\r\n  createdBefore?: Date;\r\n}\r\n\r\n/**\r\n * Snippet Sort Options\r\n * Definiert Sortierung von Snippet-Listen\r\n */\r\nexport type SnippetSortBy = 'createdAt' | 'updatedAt' | 'viewCount' | 'title';\r\nexport type SortOrder = 'asc' | 'desc';\r\n\r\nexport interface SnippetSortOptions {\r\n  sortBy: SnippetSortBy;\r\n  order: SortOrder;\r\n}\r\n\r\n/**\r\n * Default Sort Option\r\n */\r\nexport const DEFAULT_SORT: SnippetSortOptions = {\r\n  sortBy: 'createdAt',\r\n  order: 'desc',\r\n};\r\n\r\n// ============================================================\r\n// QUERY OPTIONS (Combined)\r\n// ============================================================\r\n\r\n/**\r\n * Snippet Query Options\r\n * Kombiniert Filter, Sort und Pagination\r\n */\r\nexport interface SnippetQueryOptions {\r\n  filters?: SnippetFilters;\r\n  sort?: SnippetSortOptions;\r\n  page?: number;\r\n  limit?: number;\r\n}\r\n\r\n// ============================================================\r\n// HELPER FUNCTIONS\r\n// ============================================================\r\n\r\n/**\r\n * Konvertiert Snippet zu Preview (entfernt Code)\r\n *\r\n * PERFORMANCE: Spart Bandwidth bei Listen-Ansichten\r\n */\r\nexport function toSnippetPreview(snippet: Snippet): SnippetPreview {\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const { code, ...preview } = snippet;\r\n  return preview;\r\n}\r\n\r\n/**\r\n * Berechnet Pagination Meta\r\n *\r\n * @param total - Gesamtanzahl Items\r\n * @param page - Aktuelle Seite (1-indexed)\r\n * @param limit - Items pro Seite\r\n */\r\nexport function calculatePaginationMeta(\r\n  total: number,\r\n  page: number,\r\n  limit: number,\r\n): PaginationMeta {\r\n  const totalPages = Math.ceil(total / limit);\r\n\r\n  return {\r\n    page,\r\n    limit,\r\n    total,\r\n    totalPages,\r\n    hasNextPage: page < totalPages,\r\n    hasPreviousPage: page > 1,\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]}