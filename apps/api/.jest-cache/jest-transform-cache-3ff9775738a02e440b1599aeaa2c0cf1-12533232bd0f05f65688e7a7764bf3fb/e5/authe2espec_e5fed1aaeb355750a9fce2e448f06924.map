{"file":"C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\e2e\\auth.e2e-spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\e2e\\auth.e2e-spec.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-argument */\r\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\r\n// test/e2e/auth.e2e-spec.ts\r\n\r\nimport { HttpStatus, INestApplication } from '@nestjs/common';\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport request from 'supertest';\r\nimport { AppModule } from '../../src/app.module';\r\nimport {\r\n  AllExceptionsFilter,\r\n  HttpExceptionFilter,\r\n} from '../../src/shared/filters';\r\nimport { createRegisterDto, invalidAuthData } from '../factories';\r\n\r\n/**\r\n * Auth E2E Tests\r\n *\r\n * Testet den vollständigen Auth-Flow:\r\n * - Registration\r\n * - Login\r\n * - Protected Routes\r\n * - Error Handling\r\n *\r\n * HINWEIS: Diese Tests benötigen eine laufende Datenbank!\r\n * Für CI/CD sollte eine Test-DB verwendet werden.\r\n */\r\ndescribe('Auth (E2E)', () => {\r\n  let app: INestApplication;\r\n\r\n  beforeAll(async () => {\r\n    const moduleFixture: TestingModule = await Test.createTestingModule({\r\n      imports: [AppModule],\r\n    }).compile();\r\n\r\n    app = moduleFixture.createNestApplication();\r\n\r\n    // Gleiche Konfiguration wie in main.ts\r\n    app.setGlobalPrefix('api');\r\n    app.useGlobalFilters(new AllExceptionsFilter(), new HttpExceptionFilter());\r\n\r\n    await app.init();\r\n  });\r\n\r\n  afterAll(async () => {\r\n    await app.close();\r\n  });\r\n\r\n  // ============================================================\r\n  // POST /api/auth/register\r\n  // ============================================================\r\n\r\n  describe('POST /api/auth/register', () => {\r\n    describe('with valid data', () => {\r\n      it('should register a new user and return tokens', async () => {\r\n        // Arrange\r\n        const dto = createRegisterDto();\r\n\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/register')\r\n          .send(dto);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.CREATED);\r\n        expect(response.body).toHaveProperty('user');\r\n        expect(response.body).toHaveProperty('tokens');\r\n        expect(response.body.user.email).toBe(dto.email);\r\n        expect(response.body.user.username).toBe(dto.username);\r\n        expect(response.body.user).not.toHaveProperty('passwordHash');\r\n        expect(response.body.tokens.accessToken).toBeDefined();\r\n        expect(response.body.tokens.tokenType).toBe('Bearer');\r\n      });\r\n\r\n      it('should return user with correct role', async () => {\r\n        // Arrange\r\n        const dto = createRegisterDto();\r\n\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/register')\r\n          .send(dto);\r\n\r\n        // Assert\r\n        expect(response.body.user.role).toBe('USER');\r\n      });\r\n    });\r\n\r\n    describe('with invalid data', () => {\r\n      it('should return 400 for invalid email', async () => {\r\n        // Arrange\r\n        const dto = invalidAuthData.register.invalidEmail;\r\n\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/register')\r\n          .send(dto);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.BAD_REQUEST);\r\n        expect(response.body.success).toBe(false);\r\n        expect(response.body.error.code).toBe('VALIDATION_ERROR');\r\n      });\r\n\r\n      it('should return 400 for weak password', async () => {\r\n        // Arrange\r\n        const dto = invalidAuthData.register.weakPassword;\r\n\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/register')\r\n          .send(dto);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.BAD_REQUEST);\r\n        expect(response.body.error.details).toBeDefined();\r\n      });\r\n\r\n      it('should return 400 for missing fields', async () => {\r\n        // Arrange\r\n        const dto = invalidAuthData.register.missingEmail;\r\n\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/register')\r\n          .send(dto);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.BAD_REQUEST);\r\n      });\r\n    });\r\n\r\n    describe('with duplicate data', () => {\r\n      it('should return 409 for duplicate email', async () => {\r\n        // Arrange\r\n        const dto = createRegisterDto();\r\n\r\n        // First registration\r\n        await request(app.getHttpServer()).post('/api/auth/register').send(dto);\r\n\r\n        // Act - Second registration with same email\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/register')\r\n          .send({ ...dto, username: 'different_username' });\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.CONFLICT);\r\n        expect(response.body.error.code).toBe('USER_EMAIL_EXISTS');\r\n      });\r\n\r\n      it('should return 409 for duplicate username', async () => {\r\n        // Arrange\r\n        const dto = createRegisterDto();\r\n\r\n        // First registration\r\n        await request(app.getHttpServer()).post('/api/auth/register').send(dto);\r\n\r\n        // Act - Second registration with same username\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/register')\r\n          .send({ ...dto, email: 'different@email.com' });\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.CONFLICT);\r\n        expect(response.body.error.code).toBe('USER_USERNAME_EXISTS');\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // POST /api/auth/login\r\n  // ============================================================\r\n\r\n  describe('POST /api/auth/login', () => {\r\n    let registeredUser: { email: string; password: string };\r\n\r\n    beforeAll(async () => {\r\n      // Register a user for login tests\r\n      const dto = createRegisterDto();\r\n      await request(app.getHttpServer()).post('/api/auth/register').send(dto);\r\n\r\n      registeredUser = {\r\n        email: dto.email,\r\n        password: dto.password,\r\n      };\r\n    });\r\n\r\n    describe('with valid credentials', () => {\r\n      it('should login and return tokens', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send(registeredUser);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.OK);\r\n        expect(response.body).toHaveProperty('user');\r\n        expect(response.body).toHaveProperty('tokens');\r\n        expect(response.body.tokens.accessToken).toBeDefined();\r\n      });\r\n\r\n      it('should return user without passwordHash', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send(registeredUser);\r\n\r\n        // Assert\r\n        expect(response.body.user).not.toHaveProperty('passwordHash');\r\n      });\r\n    });\r\n\r\n    describe('with invalid credentials', () => {\r\n      it('should return 401 for wrong password', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send({\r\n            email: registeredUser.email,\r\n            password: 'WrongPassword123',\r\n          });\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.UNAUTHORIZED);\r\n        expect(response.body.error.code).toBe('AUTH_INVALID_CREDENTIALS');\r\n      });\r\n\r\n      it('should return 401 for non-existent email', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send({\r\n            email: 'nonexistent@email.com',\r\n            password: 'SomePassword123',\r\n          });\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.UNAUTHORIZED);\r\n        expect(response.body.error.message).toBe('Invalid email or password');\r\n      });\r\n\r\n      it('should return same error message for wrong email and wrong password', async () => {\r\n        // Security: Prevent user enumeration\r\n\r\n        // Wrong email\r\n        const wrongEmailResponse = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send({ email: 'wrong@email. com', password: 'Pass123!' });\r\n\r\n        // Wrong password\r\n        const wrongPasswordResponse = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send({ email: registeredUser.email, password: 'WrongPass123' });\r\n\r\n        // Assert - Same message for both\r\n        expect(wrongEmailResponse.body.error.message).toBe(\r\n          wrongPasswordResponse.body.error.message,\r\n        );\r\n      });\r\n    });\r\n\r\n    describe('with invalid data', () => {\r\n      it('should return 400 for invalid email format', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send(invalidAuthData.login.invalidEmail);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.BAD_REQUEST);\r\n      });\r\n\r\n      it('should return 400 for missing password', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .post('/api/auth/login')\r\n          .send(invalidAuthData.login.missingPassword);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.BAD_REQUEST);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // GET /api/auth/me\r\n  // ============================================================\r\n\r\n  describe('GET /api/auth/me', () => {\r\n    let accessToken: string;\r\n    let userEmail: string;\r\n\r\n    beforeAll(async () => {\r\n      // Register and get token\r\n      const dto = createRegisterDto();\r\n      const response = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send(dto);\r\n\r\n      accessToken = response.body.tokens.accessToken;\r\n      userEmail = dto.email;\r\n    });\r\n\r\n    describe('with valid token', () => {\r\n      it('should return current user profile', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .get('/api/auth/me')\r\n          .set('Authorization', `Bearer ${accessToken}`);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.OK);\r\n        expect(response.body.email).toBe(userEmail);\r\n        expect(response.body).not.toHaveProperty('passwordHash');\r\n      });\r\n\r\n      it('should return user with all expected fields', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .get('/api/auth/me')\r\n          .set('Authorization', `Bearer ${accessToken}`);\r\n\r\n        // Assert\r\n        expect(response.body).toHaveProperty('id');\r\n        expect(response.body).toHaveProperty('email');\r\n        expect(response.body).toHaveProperty('username');\r\n        expect(response.body).toHaveProperty('bio');\r\n        expect(response.body).toHaveProperty('avatarUrl');\r\n        expect(response.body).toHaveProperty('role');\r\n        expect(response.body).toHaveProperty('createdAt');\r\n        expect(response.body).toHaveProperty('updatedAt');\r\n      });\r\n    });\r\n\r\n    describe('without token', () => {\r\n      it('should return 401', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer()).get('/api/auth/me');\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.UNAUTHORIZED);\r\n        expect(response.body.error.code).toBe('AUTH_TOKEN_MISSING');\r\n      });\r\n    });\r\n\r\n    describe('with invalid token', () => {\r\n      it('should return 401 for malformed token', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .get('/api/auth/me')\r\n          .set('Authorization', 'Bearer invalid-token');\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.UNAUTHORIZED);\r\n      });\r\n\r\n      it('should return 401 for expired token', async () => {\r\n        // Arrange - Create an expired token (this is a simplified example)\r\n        const expiredToken =\r\n          'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwiZXhwIjoxfQ.invalid';\r\n\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .get('/api/auth/me')\r\n          .set('Authorization', `Bearer ${expiredToken}`);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.UNAUTHORIZED);\r\n      });\r\n\r\n      it('should return 401 for wrong authorization scheme', async () => {\r\n        // Act\r\n        const response = await request(app.getHttpServer())\r\n          .get('/api/auth/me')\r\n          .set('Authorization', `Basic ${accessToken}`);\r\n\r\n        // Assert\r\n        expect(response.status).toBe(HttpStatus.UNAUTHORIZED);\r\n      });\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // FULL AUTH FLOW\r\n  // ============================================================\r\n\r\n  describe('Full Auth Flow', () => {\r\n    it('should complete register -> login -> me flow', async () => {\r\n      // 1. Register\r\n      const registerDto = createRegisterDto();\r\n      const registerResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/register')\r\n        .send(registerDto);\r\n\r\n      expect(registerResponse.status).toBe(HttpStatus.CREATED);\r\n\r\n      // 2. Login\r\n      const loginResponse = await request(app.getHttpServer())\r\n        .post('/api/auth/login')\r\n        .send({\r\n          email: registerDto.email,\r\n          password: registerDto.password,\r\n        });\r\n\r\n      expect(loginResponse.status).toBe(HttpStatus.OK);\r\n      const token = loginResponse.body.tokens.accessToken;\r\n\r\n      // 3. Get Profile\r\n      const meResponse = await request(app.getHttpServer())\r\n        .get('/api/auth/me')\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(meResponse.status).toBe(HttpStatus.OK);\r\n      expect(meResponse.body.email).toBe(registerDto.email);\r\n    });\r\n  });\r\n});\r\n"],"version":3}