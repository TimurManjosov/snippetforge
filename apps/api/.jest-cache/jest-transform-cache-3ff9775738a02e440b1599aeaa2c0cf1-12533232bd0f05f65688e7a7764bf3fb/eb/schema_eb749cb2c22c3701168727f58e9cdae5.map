{"version":3,"names":["cov_1wht5lqyhd","actualCoverage","s","pg_core_1","require","exports","roleEnum","pgEnum","users","pgTable","id","uuid","primaryKey","defaultRandom","email","varchar","length","notNull","unique","username","passwordHash","bio","text","avatarUrl","role","default","createdAt","timestamp","withTimezone","defaultNow","updatedAt","table","f","emailIdx","index","on","usernameIdx","roleIdx"],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\lib\\db\\schema.ts"],"sourcesContent":["import {\n  index,\n  pgEnum,\n  pgTable,\n  text,\n  timestamp,\n  uuid,\n  varchar,\n} from 'drizzle-orm/pg-core';\n\n// Role Enum\nexport const roleEnum = pgEnum('role', ['USER', 'ADMIN', 'MODERATOR']);\n\n// Users Table\nexport const users = pgTable(\n  'users',\n  {\n    id: uuid('id').primaryKey().defaultRandom(),\n    email: varchar('email', { length: 255 }).notNull().unique(),\n    username: varchar('username', { length: 30 }).notNull().unique(),\n    passwordHash: varchar('password_hash', { length: 60 }).notNull(),\n    bio: text('bio'),\n    avatarUrl: text('avatar_url'),\n    role: roleEnum('role').default('USER').notNull(),\n    createdAt: timestamp('created_at', { withTimezone: true })\n      .defaultNow()\n      .notNull(),\n    updatedAt: timestamp('updated_at', { withTimezone: true })\n      .defaultNow()\n      .notNull(),\n  },\n  (table) => ({\n    emailIdx: index('users_email_idx').on(table.email),\n    usernameIdx: index('users_username_idx').on(table.username),\n    roleIdx: index('users_role_idx').on(table.role),\n  }),\n);\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type NewUser = typeof users.$inferInsert;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAwBI;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;;AAxBJ,MAAAC,SAAA;AAAA;AAAA,CAAAH,cAAA,GAAAE,CAAA,OAAAE,OAAA;AAUA;AAAA;AAAAJ,cAAA,GAAAE,CAAA;AACaG,OAAA,CAAAC,QAAQ,GAAG,IAAAH,SAAA,CAAAI,MAAM,EAAC,MAAM,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC;AAEtE;AAAA;AAAAP,cAAA,GAAAE,CAAA;AACaG,OAAA,CAAAG,KAAK,GAAG,IAAAL,SAAA,CAAAM,OAAO,EAC1B,OAAO,EACP;EACEC,EAAE,EAAE,IAAAP,SAAA,CAAAQ,IAAI,EAAC,IAAI,CAAC,CAACC,UAAU,EAAE,CAACC,aAAa,EAAE;EAC3CC,KAAK,EAAE,IAAAX,SAAA,CAAAY,OAAO,EAAC,OAAO,EAAE;IAAEC,MAAM,EAAE;EAAG,CAAE,CAAC,CAACC,OAAO,EAAE,CAACC,MAAM,EAAE;EAC3DC,QAAQ,EAAE,IAAAhB,SAAA,CAAAY,OAAO,EAAC,UAAU,EAAE;IAAEC,MAAM,EAAE;EAAE,CAAE,CAAC,CAACC,OAAO,EAAE,CAACC,MAAM,EAAE;EAChEE,YAAY,EAAE,IAAAjB,SAAA,CAAAY,OAAO,EAAC,eAAe,EAAE;IAAEC,MAAM,EAAE;EAAE,CAAE,CAAC,CAACC,OAAO,EAAE;EAChEI,GAAG,EAAE,IAAAlB,SAAA,CAAAmB,IAAI,EAAC,KAAK,CAAC;EAChBC,SAAS,EAAE,IAAApB,SAAA,CAAAmB,IAAI,EAAC,YAAY,CAAC;EAC7BE,IAAI,EAAE,IAAAnB,OAAA,CAAAC,QAAQ,EAAC,MAAM,CAAC,CAACmB,OAAO,CAAC,MAAM,CAAC,CAACR,OAAO,EAAE;EAChDS,SAAS,EAAE,IAAAvB,SAAA,CAAAwB,SAAS,EAAC,YAAY,EAAE;IAAEC,YAAY,EAAE;EAAI,CAAE,CAAC,CACvDC,UAAU,EAAE,CACZZ,OAAO,EAAE;EACZa,SAAS,EAAE,IAAA3B,SAAA,CAAAwB,SAAS,EAAC,YAAY,EAAE;IAAEC,YAAY,EAAE;EAAI,CAAE,CAAC,CACvDC,UAAU,EAAE,CACZZ,OAAO;CACX,EACAc,KAAK,IAAM;EAAA;EAAA/B,cAAA,GAAAgC,CAAA;EAAAhC,cAAA,GAAAE,CAAA;EAAA;IACV+B,QAAQ,EAAE,IAAA9B,SAAA,CAAA+B,KAAK,EAAC,iBAAiB,CAAC,CAACC,EAAE,CAACJ,KAAK,CAACjB,KAAK,CAAC;IAClDsB,WAAW,EAAE,IAAAjC,SAAA,CAAA+B,KAAK,EAAC,oBAAoB,CAAC,CAACC,EAAE,CAACJ,KAAK,CAACZ,QAAQ,CAAC;IAC3DkB,OAAO,EAAE,IAAAlC,SAAA,CAAA+B,KAAK,EAAC,gBAAgB,CAAC,CAACC,EAAE,CAACJ,KAAK,CAACP,IAAI;GAC/C;CAAC,CACH","ignoreList":[]}