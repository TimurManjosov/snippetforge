{"file":"C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\unit\\repositories\\snippets.repository.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\unit\\repositories\\snippets.repository.spec.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\n\r\n// test/unit/repositories/snippets.repository.spec.ts\r\n\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport { SnippetsRepository } from '../../../src/modules/snippets/snippets.repository';\r\nimport { DatabaseService } from '../../../src/shared/database';\r\nimport {\r\n  createMockDatabaseService,\r\n  createMockSnippet,\r\n  createMockSnippets,\r\n  type MockDatabaseService,\r\n} from '../../mocks';\r\n\r\n/**\r\n * SnippetsRepository Unit Tests\r\n *\r\n * Testet:\r\n * - CRUD Operationen\r\n * - Pagination\r\n * - Filtering\r\n * - Statistics\r\n * - Edge Cases\r\n */\r\ndescribe('SnippetsRepository', () => {\r\n  let repository: SnippetsRepository;\r\n  let mockDb: MockDatabaseService;\r\n\r\n  const mockSnippet = createMockSnippet();\r\n\r\n  beforeEach(async () => {\r\n    mockDb = createMockDatabaseService();\r\n    mockDb.drizzle.query.snippets = {\r\n      findFirst: jest.fn(),\r\n      findMany: jest.fn(),\r\n    };\r\n\r\n    const module: TestingModule = await Test.createTestingModule({\r\n      providers: [\r\n        SnippetsRepository,\r\n        {\r\n          provide: DatabaseService,\r\n          useValue: mockDb,\r\n        },\r\n      ],\r\n    }).compile();\r\n\r\n    repository = module.get<SnippetsRepository>(SnippetsRepository);\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  // ============================================================\r\n  // CREATE\r\n  // ============================================================\r\n\r\n  describe('create', () => {\r\n    it('should create a new snippet', async () => {\r\n      // Arrange\r\n      const newSnippet = {\r\n        title: 'New Snippet',\r\n        code: 'console.log(\"test\")',\r\n        language: 'javascript',\r\n        userId: 'user-123',\r\n      };\r\n\r\n      mockDb.drizzle.insert.mockReturnValue({\r\n        values: jest.fn().mockReturnValue({\r\n          returning: jest.fn().mockResolvedValue([mockSnippet]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.create(newSnippet);\r\n\r\n      // Assert\r\n      expect(result).toEqual(mockSnippet);\r\n      expect(mockDb.drizzle.insert).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // READ - SINGLE\r\n  // ============================================================\r\n\r\n  describe('findById', () => {\r\n    it('should return snippet when found', async () => {\r\n      // Arrange\r\n\r\n      mockDb.drizzle.query.snippets.findFirst.mockResolvedValue(mockSnippet);\r\n\r\n      // Act\r\n      const result = await repository.findById('snippet-123');\r\n\r\n      // Assert\r\n      expect(result).toEqual(mockSnippet);\r\n      expect(mockDb.drizzle.query.snippets.findFirst).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should return null when not found', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.query.snippets.findFirst.mockResolvedValue(undefined);\r\n\r\n      // Act\r\n      const result = await repository.findById('nonexistent');\r\n\r\n      // Assert\r\n      expect(result).toBeNull();\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // READ - LISTS\r\n  // ============================================================\r\n\r\n  describe('findByUserId', () => {\r\n    it('should return user snippets', async () => {\r\n      // Arrange\r\n      const snippets = createMockSnippets(3, { userId: 'user-123' });\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue(snippets);\r\n\r\n      // Act\r\n      const result = await repository.findByUserId('user-123');\r\n\r\n      // Assert\r\n      expect(result).toEqual(snippets);\r\n      expect(result).toHaveLength(3);\r\n    });\r\n\r\n    it('should limit results to specified amount', async () => {\r\n      // Arrange\r\n      const snippets = createMockSnippets(5);\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue(snippets);\r\n\r\n      // Act\r\n      await repository.findByUserId('user-123', 5);\r\n\r\n      // Assert\r\n      expect(mockDb.drizzle.query.snippets.findMany).toHaveBeenCalledWith(\r\n        expect.objectContaining({ limit: 5 }),\r\n      );\r\n    });\r\n\r\n    it('should enforce max limit of 100', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue([]);\r\n\r\n      // Act\r\n      await repository.findByUserId('user-123', 200);\r\n\r\n      // Assert\r\n      expect(mockDb.drizzle.query.snippets.findMany).toHaveBeenCalledWith(\r\n        expect.objectContaining({ limit: 100 }),\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('findPublic', () => {\r\n    it('should return paginated public snippets', async () => {\r\n      // Arrange\r\n      const snippets = createMockSnippets(20, { isPublic: true });\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue(snippets);\r\n      mockDb.drizzle.select.mockReturnValue({\r\n        from: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockResolvedValue([{ total: 100 }]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.findPublic(1, 20);\r\n\r\n      // Assert\r\n      expect(result.data).toEqual(snippets);\r\n      expect(result.meta).toEqual({\r\n        page: 1,\r\n        limit: 20,\r\n        total: 100,\r\n        totalPages: 5,\r\n        hasNextPage: true,\r\n        hasPreviousPage: false,\r\n      });\r\n    });\r\n\r\n    it('should calculate correct pagination for page 2', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue([]);\r\n      mockDb.drizzle.select.mockReturnValue({\r\n        from: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockResolvedValue([{ total: 100 }]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.findPublic(2, 20);\r\n\r\n      // Assert\r\n      expect(result.meta.page).toBe(2);\r\n      expect(result.meta.hasNextPage).toBe(true);\r\n      expect(result.meta.hasPreviousPage).toBe(true);\r\n    });\r\n\r\n    it('should calculate correct pagination for last page', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue([]);\r\n      mockDb.drizzle.select.mockReturnValue({\r\n        from: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockResolvedValue([{ total: 100 }]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.findPublic(5, 20);\r\n\r\n      // Assert\r\n      expect(result.meta.page).toBe(5);\r\n      expect(result.meta.hasNextPage).toBe(false);\r\n      expect(result.meta.hasPreviousPage).toBe(true);\r\n    });\r\n  });\r\n\r\n  describe('findByLanguage', () => {\r\n    it('should return snippets filtered by language', async () => {\r\n      // Arrange\r\n      const snippets = createMockSnippets(5, { language: 'typescript' });\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue(snippets);\r\n\r\n      // Act\r\n      const result = await repository.findByLanguage('typescript');\r\n\r\n      // Assert\r\n      expect(result).toEqual(snippets);\r\n      expect(result.every((s) => s.language === 'typescript')).toBe(true);\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // UPDATE\r\n  // ============================================================\r\n\r\n  describe('update', () => {\r\n    it('should update snippet successfully', async () => {\r\n      // Arrange\r\n      const updatedSnippet = { ...mockSnippet, title: 'Updated Title' };\r\n      mockDb.drizzle.update.mockReturnValue({\r\n        set: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockReturnValue({\r\n            returning: jest.fn().mockResolvedValue([updatedSnippet]),\r\n          }),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.update('snippet-123', {\r\n        title: 'Updated Title',\r\n      });\r\n\r\n      // Assert\r\n      expect(result?.title).toBe('Updated Title');\r\n    });\r\n\r\n    it('should return null when snippet not found', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.update.mockReturnValue({\r\n        set: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockReturnValue({\r\n            returning: jest.fn().mockResolvedValue([]),\r\n          }),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.update('nonexistent', {\r\n        title: 'Updated',\r\n      });\r\n\r\n      // Assert\r\n      expect(result).toBeNull();\r\n    });\r\n\r\n    it('should update updatedAt timestamp', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.update.mockReturnValue({\r\n        set: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockReturnValue({\r\n            returning: jest.fn().mockResolvedValue([mockSnippet]),\r\n          }),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      await repository.update('snippet-123', { title: 'Updated' });\r\n\r\n      // Assert\r\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\r\n      expect(mockDb.drizzle.update().set).toHaveBeenCalledWith(\r\n        expect.objectContaining({\r\n          updatedAt: expect.any(Date),\r\n        }),\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('incrementViewCount', () => {\r\n    it('should increment view count atomically', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.update.mockReturnValue({\r\n        set: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockReturnValue({\r\n            returning: jest.fn().mockResolvedValue([{ id: 'snippet-123' }]),\r\n          }),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.incrementViewCount('snippet-123');\r\n\r\n      // Assert\r\n      expect(result).toBe(true);\r\n    });\r\n\r\n    it('should return false when snippet not found', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.update.mockReturnValue({\r\n        set: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockReturnValue({\r\n            returning: jest.fn().mockResolvedValue([]),\r\n          }),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.incrementViewCount('nonexistent');\r\n\r\n      // Assert\r\n      expect(result).toBe(false);\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // DELETE\r\n  // ============================================================\r\n\r\n  describe('delete', () => {\r\n    it('should delete snippet successfully', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.delete.mockReturnValue({\r\n        where: jest.fn().mockReturnValue({\r\n          returning: jest.fn().mockResolvedValue([{ id: 'snippet-123' }]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.delete('snippet-123');\r\n\r\n      // Assert\r\n      expect(result).toBe(true);\r\n    });\r\n\r\n    it('should return false when snippet not found', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.delete.mockReturnValue({\r\n        where: jest.fn().mockReturnValue({\r\n          returning: jest.fn().mockResolvedValue([]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.delete('nonexistent');\r\n\r\n      // Assert\r\n      expect(result).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('deleteByUserId', () => {\r\n    it('should delete all user snippets', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.delete.mockReturnValue({\r\n        where: jest.fn().mockReturnValue({\r\n          returning: jest\r\n            .fn()\r\n            .mockResolvedValue([{ id: '1' }, { id: '2' }, { id: '3' }]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.deleteByUserId('user-123');\r\n\r\n      // Assert\r\n      expect(result).toBe(3);\r\n    });\r\n  });\r\n\r\n  // ============================================================\r\n  // STATISTICS\r\n  // ============================================================\r\n\r\n  describe('countByUserId', () => {\r\n    it('should return count of user snippets', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.select.mockReturnValue({\r\n        from: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockResolvedValue([{ total: 42 }]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.countByUserId('user-123');\r\n\r\n      // Assert\r\n      expect(result).toBe(42);\r\n    });\r\n  });\r\n\r\n  describe('countPublic', () => {\r\n    it('should return count of public snippets', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.select.mockReturnValue({\r\n        from: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockResolvedValue([{ total: 100 }]),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.countPublic();\r\n\r\n      // Assert\r\n      expect(result).toBe(100);\r\n    });\r\n  });\r\n\r\n  describe('getUserStats', () => {\r\n    it('should return comprehensive user statistics', async () => {\r\n      // Arrange\r\n      const userSnippets = [\r\n        createMockSnippet({ isPublic: true, viewCount: 10 }),\r\n        createMockSnippet({ isPublic: true, viewCount: 20 }),\r\n        createMockSnippet({ isPublic: false, viewCount: 5 }),\r\n      ];\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue(userSnippets);\r\n\r\n      // Act\r\n      const result = await repository.getUserStats('user-123');\r\n\r\n      // Assert\r\n      expect(result).toEqual({\r\n        total: 3,\r\n        public: 2,\r\n        private: 1,\r\n        totalViews: 35,\r\n        mostViewed: expect.objectContaining({ viewCount: 20 }),\r\n        latestSnippet: expect.any(Object),\r\n      });\r\n    });\r\n\r\n    it('should handle user with no snippets', async () => {\r\n      // Arrange\r\n      mockDb.drizzle.query.snippets.findMany.mockResolvedValue([]);\r\n\r\n      // Act\r\n      const result = await repository.getUserStats('user-123');\r\n\r\n      // Assert\r\n      expect(result).toEqual({\r\n        total: 0,\r\n        public: 0,\r\n        private: 0,\r\n        totalViews: 0,\r\n        mostViewed: undefined,\r\n        latestSnippet: undefined,\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('getLanguageStats', () => {\r\n    it('should return language statistics', async () => {\r\n      // Arrange\r\n      const languageStats = [\r\n        { language: 'typescript', count: 10 },\r\n        { language: 'javascript', count: 5 },\r\n        { language: 'python', count: 3 },\r\n      ];\r\n      mockDb.drizzle.select.mockReturnValue({\r\n        from: jest.fn().mockReturnValue({\r\n          where: jest.fn().mockReturnValue({\r\n            groupBy: jest.fn().mockReturnValue({\r\n              orderBy: jest.fn().mockResolvedValue(languageStats),\r\n            }),\r\n          }),\r\n        }),\r\n      } as any);\r\n\r\n      // Act\r\n      const result = await repository.getLanguageStats();\r\n\r\n      // Assert\r\n      expect(result).toEqual(languageStats);\r\n    });\r\n  });\r\n});\r\n"],"version":3}