{"file":"C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\mocks\\auth.mock.ts","mappings":";AAAA,0BAA0B;;;AA+D1B,0DAOC;AAKD,wDAKC;AAKD,oDASC;AA1FD,6CAAkD;AAElD;;;;GAIG;AAEH,2CAA2C;AAC3C,gBAAgB;AAChB,2CAA2C;AAEpC,MAAM,qBAAqB,GAAG,GAAG,EAAE,CAAC,CAAC;IAC1C,QAAQ,EAAE,IAAI,CAAC,EAAE,EAAE;IACnB,KAAK,EAAE,IAAI,CAAC,EAAE,EAAE;IAChB,gBAAgB,EAAE,IAAI,CAAC,EAAE,EAAE;IAC3B,cAAc,EAAE,IAAI,CAAC,EAAE,EAAE;CAC1B,CAAC,CAAC;AALU,QAAA,qBAAqB,yBAK/B;AAII,MAAM,oBAAoB,GAAG,GAAwB,EAAE,CAAC,CAAC;IAC9D,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,eAAe,CAAC,gBAAgB,CAAC;IACjD,SAAS,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,iBAAiB,CAAC,gBAAgB,CAAC;IACxD,MAAM,EAAE,IAAI;SACT,EAAE,EAAE;SACJ,eAAe,CAAC,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IAC5E,WAAW,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,iBAAiB,CAAC;QACvC,GAAG,EAAE,SAAS;QACd,KAAK,EAAE,eAAe;QACtB,IAAI,EAAE,MAAM;KACb,CAAC;IACF,MAAM,EAAE,IAAI;SACT,EAAE,EAAE;SACJ,eAAe,CAAC,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;CAC7E,CAAC,CAAC;AAdU,QAAA,oBAAoB,wBAc9B;AAIH,2CAA2C;AAC3C,iBAAiB;AACjB,2CAA2C;AAEpC,MAAM,mBAAmB,GAAG,GAAG,EAAE,CAAC,CAAC;IACxC,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE;IACd,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE;IACjB,cAAc,EAAE,IAAI,CAAC,EAAE,EAAE;IACzB,iBAAiB,EAAE,IAAI,CAAC,EAAE,EAAE;CAC7B,CAAC,CAAC;AALU,QAAA,mBAAmB,uBAK7B;AAIH,2CAA2C;AAC3C,YAAY;AACZ,2CAA2C;AAE3C;;GAEG;AACH,SAAgB,uBAAuB;IACrC,OAAO;QACL,WAAW,EACT,sIAAsI;QACxI,SAAS,EAAE,QAAQ;QACnB,SAAS,EAAE,GAAG;KACf,CAAC;AACJ,CAAC;AAED;;GAEG;AACH,SAAgB,sBAAsB,CAAC,aAAa,GAAG,EAAE;IACvD,OAAO;QACL,IAAI,EAAE,IAAA,+BAAkB,EAAC,aAAa,CAAC;QACvC,MAAM,EAAE,uBAAuB,EAAE;KAClC,CAAC;AACJ,CAAC;AAED;;GAEG;AACH,SAAgB,oBAAoB,CAAC,SAAS,GAAG,EAAE;IACjD,OAAO;QACL,GAAG,EAAE,kBAAkB;QACvB,KAAK,EAAE,kBAAkB;QACzB,IAAI,EAAE,MAAM;QACZ,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC;QAClC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,GAAG;QACxC,GAAG,SAAS;KACb,CAAC;AACJ,CAAC","names":[],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\mocks\\auth.mock.ts"],"sourcesContent":["// test/mocks/auth.mock.ts\r\n\r\nimport { JwtService } from '@nestjs/jwt';\r\nimport { type AuthResponse, type TokenResponse } from '../../src/modules/auth';\r\nimport { createMockSafeUser } from './users.mock';\r\n\r\n/**\r\n * Auth Mocks\r\n *\r\n * Mock-Implementierungen fÃ¼r AuthService und JwtService.\r\n */\r\n\r\n// ========================================\r\n// SERVICE MOCKS\r\n// ========================================\r\n\r\nexport const createMockAuthService = () => ({\r\n  register: jest.fn(),\r\n  login: jest.fn(),\r\n  validateUserById: jest.fn(),\r\n  getCurrentUser: jest.fn(),\r\n});\r\n\r\nexport type MockAuthService = ReturnType<typeof createMockAuthService>;\r\n\r\nexport const createMockJwtService = (): Partial<JwtService> => ({\r\n  sign: jest.fn().mockReturnValue('mock-jwt-token'),\r\n  signAsync: jest.fn().mockResolvedValue('mock-jwt-token'),\r\n  verify: jest\r\n    .fn()\r\n    .mockReturnValue({ sub: 'user-id', email: 'test@test.com', role: 'USER' }),\r\n  verifyAsync: jest.fn().mockResolvedValue({\r\n    sub: 'user-id',\r\n    email: 'test@test.com',\r\n    role: 'USER',\r\n  }),\r\n  decode: jest\r\n    .fn()\r\n    .mockReturnValue({ sub: 'user-id', email: 'test@test.com', role: 'USER' }),\r\n});\r\n\r\nexport type MockJwtService = ReturnType<typeof createMockJwtService>;\r\n\r\n// ========================================\r\n// REFLECTOR MOCK\r\n// ========================================\r\n\r\nexport const createMockReflector = () => ({\r\n  get: jest.fn(),\r\n  getAll: jest.fn(),\r\n  getAllAndMerge: jest.fn(),\r\n  getAllAndOverride: jest.fn(),\r\n});\r\n\r\nexport type MockReflector = ReturnType<typeof createMockReflector>;\r\n\r\n// ========================================\r\n// TEST DATA\r\n// ========================================\r\n\r\n/**\r\n * Erstellt eine Mock TokenResponse\r\n */\r\nexport function createMockTokenResponse(): TokenResponse {\r\n  return {\r\n    accessToken:\r\n      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ0ZXN0LXVzZXItaWQiLCJlbWFpbCI6InRlc3RAdGVzdC5jb20iLCJyb2xlIjoiVVNFUiJ9.mock-signature',\r\n    tokenType: 'Bearer',\r\n    expiresIn: 900,\r\n  };\r\n}\r\n\r\n/**\r\n * Erstellt eine Mock AuthResponse\r\n */\r\nexport function createMockAuthResponse(userOverrides = {}): AuthResponse {\r\n  return {\r\n    user: createMockSafeUser(userOverrides),\r\n    tokens: createMockTokenResponse(),\r\n  };\r\n}\r\n\r\n/**\r\n * Erstellt einen Mock JWT Payload\r\n */\r\nexport function createMockJwtPayload(overrides = {}) {\r\n  return {\r\n    sub: 'test-user-id-123',\r\n    email: 'test@example.com',\r\n    role: 'USER',\r\n    iat: Math.floor(Date.now() / 1000),\r\n    exp: Math.floor(Date.now() / 1000) + 900,\r\n    ...overrides,\r\n  };\r\n}\r\n"],"version":3}