{"file":"C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\unit\\decorators\\roles.decorator.spec.ts","mappings":";AAAA,+CAA+C;;;;;;;;;;;AAE/C,uCAAyC;AACzC,0FAG8D;AAE9D,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;IAC/B,IAAI,SAAoB,CAAC;IAEzB,UAAU,CAAC,GAAG,EAAE;QACd,SAAS,GAAG,IAAI,gBAAS,EAAE,CAAC;IAC9B,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,2BAA2B,EAAE,GAAG,EAAE;QAEnC,IAAM,cAAc,GAApB,MAAM,cAAc;YAClB,UAAU,KAAI,CAAC;SAChB,CAAA;QAFK,cAAc;YADnB,IAAA,uBAAK,EAAC,OAAO,EAAE,WAAW,CAAC;WACtB,cAAc,CAEnB;QAED,MAAM,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,2BAAS,EAAE,cAAc,CAAC,CAAC;QACvD,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC,CAAC;IAChD,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,8BAA8B,EAAE,GAAG,EAAE;QAEtC,IAAM,cAAc,GAApB,MAAM,cAAc;YAClB,UAAU,KAAI,CAAC;SAChB,CAAA;QAFK,cAAc;YADnB,IAAA,uBAAK,EAAC,MAAM,CAAC;WACR,cAAc,CAEnB;QAED,MAAM,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,2BAAS,EAAE,cAAc,CAAC,CAAC;QACvD,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;IAClC,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,4BAA4B,EAAE,GAAG,EAAE;QACpC,MAAM,cAAc;YAElB,UAAU,KAAI,CAAC;SAChB;QADC;YADC,IAAA,uBAAK,EAAC,OAAO,CAAC;;;;wDACA;QAGjB,MAAM,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;QACxC,MAAM,KAAK,GAAG,SAAS,CAAC,GAAG,CAAC,2BAAS,EAAE,UAAU,CAAC,UAAU,CAAC,CAAC;QAC9D,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;IACnC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\test\\unit\\decorators\\roles.decorator.spec.ts"],"sourcesContent":["// test/unit/decorators/roles.decorator.spec.ts\r\n\r\nimport { Reflector } from '@nestjs/core';\r\nimport {\r\n  Roles,\r\n  ROLES_KEY,\r\n} from '../../../src/modules/auth/decorators/roles.decorator';\r\n\r\ndescribe('Roles Decorator', () => {\r\n  let reflector: Reflector;\r\n\r\n  beforeEach(() => {\r\n    reflector = new Reflector();\r\n  });\r\n\r\n  it('should set roles metadata', () => {\r\n    @Roles('ADMIN', 'MODERATOR')\r\n    class TestController {\r\n      testMethod() {}\r\n    }\r\n\r\n    const roles = reflector.get(ROLES_KEY, TestController);\r\n    expect(roles).toEqual(['ADMIN', 'MODERATOR']);\r\n  });\r\n\r\n  it('should work with single role', () => {\r\n    @Roles('USER')\r\n    class TestController {\r\n      testMethod() {}\r\n    }\r\n\r\n    const roles = reflector.get(ROLES_KEY, TestController);\r\n    expect(roles).toEqual(['USER']);\r\n  });\r\n\r\n  it('should set roles on method', () => {\r\n    class TestController {\r\n      @Roles('ADMIN')\r\n      testMethod() {}\r\n    }\r\n\r\n    const controller = new TestController();\r\n    const roles = reflector.get(ROLES_KEY, controller.testMethod);\r\n    expect(roles).toEqual(['ADMIN']);\r\n  });\r\n});\r\n"],"version":3}