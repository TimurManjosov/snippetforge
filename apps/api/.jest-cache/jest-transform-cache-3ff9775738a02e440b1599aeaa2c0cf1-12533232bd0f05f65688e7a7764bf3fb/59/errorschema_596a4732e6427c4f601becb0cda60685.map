{"file":"C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\shared\\swagger\\schemas\\error.schema.ts","mappings":"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","names":[],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\shared\\swagger\\schemas\\error.schema.ts"],"sourcesContent":["// src/shared/swagger/schemas/error.schema.ts\r\n\r\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\r\n\r\n/**\r\n * Swagger Schemas für Error Responses\r\n *\r\n * WARUM KLASSEN STATT INTERFACES?\r\n * - @nestjs/swagger braucht Klassen für Schema-Generierung\r\n * - Decorators können nur auf Klassen angewendet werden\r\n * - Runtime-Reflection für automatische Schema-Erstellung\r\n *\r\n * WICHTIG:\r\n * - Diese Klassen sind NUR für Dokumentation\r\n * - Sie werden NICHT für Validierung verwendet\r\n * - Zod-Schemas bleiben für Runtime-Validierung\r\n */\r\n\r\n/**\r\n * Error Details Schema\r\n * Zusätzliche Informationen bei Validation Errors\r\n */\r\nexport class ErrorDetailsSchema {\r\n  @ApiPropertyOptional({\r\n    description: 'Field-specific validation errors',\r\n    example: {\r\n      email: ['Invalid email format'],\r\n      password: ['Password must be at least 8 characters'],\r\n    },\r\n    type: 'object',\r\n    additionalProperties: {\r\n      type: 'array',\r\n      items: { type: 'string' },\r\n    },\r\n  })\r\n  fields?: Record<string, string[]>;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Additional context information',\r\n    type: 'object',\r\n    additionalProperties: true,\r\n  })\r\n  context?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Error Object Schema\r\n * Hauptteil der Error Response\r\n */\r\nexport class ErrorObjectSchema {\r\n  @ApiProperty({\r\n    description: 'Machine-readable error code',\r\n    example: 'VALIDATION_ERROR',\r\n    enum: [\r\n      'AUTH_TOKEN_MISSING',\r\n      'AUTH_TOKEN_INVALID',\r\n      'AUTH_TOKEN_EXPIRED',\r\n      'AUTH_INVALID_CREDENTIALS',\r\n      'AUTH_INSUFFICIENT_ROLE',\r\n      'AUTH_ACCESS_DENIED',\r\n      'VALIDATION_ERROR',\r\n      'USER_NOT_FOUND',\r\n      'USER_EMAIL_EXISTS',\r\n      'USER_USERNAME_EXISTS',\r\n      'RESOURCE_NOT_FOUND',\r\n      'SERVER_ERROR',\r\n    ],\r\n  })\r\n  code: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Human-readable error message',\r\n    example: 'Validation failed',\r\n  })\r\n  message: string;\r\n\r\n  @ApiProperty({\r\n    description: 'HTTP status code',\r\n    example: 400,\r\n  })\r\n  statusCode: number;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Additional error details',\r\n    type: ErrorDetailsSchema,\r\n  })\r\n  details?: ErrorDetailsSchema;\r\n}\r\n\r\n/**\r\n * Response Meta Schema\r\n * Metadaten jeder Response\r\n */\r\nexport class ResponseMetaSchema {\r\n  @ApiProperty({\r\n    description: 'ISO 8601 timestamp',\r\n    example: '2026-01-10T12:00:00.000Z',\r\n  })\r\n  timestamp: string;\r\n\r\n  @ApiProperty({\r\n    description: 'Request path',\r\n    example: '/api/auth/register',\r\n  })\r\n  path: string;\r\n\r\n  @ApiProperty({\r\n    description: 'HTTP method',\r\n    example: 'POST',\r\n  })\r\n  method: string;\r\n\r\n  @ApiPropertyOptional({\r\n    description: 'Request ID for tracing',\r\n    example: 'req-123-456-789',\r\n  })\r\n  requestId?: string;\r\n}\r\n\r\n/**\r\n * Standard Error Response Schema\r\n * Wird für alle Error-Dokumentationen verwendet\r\n */\r\nexport class ErrorResponseSchema {\r\n  @ApiProperty({\r\n    description: 'Always false for errors',\r\n    example: false,\r\n  })\r\n  success: false;\r\n\r\n  @ApiProperty({\r\n    description: 'Error details',\r\n    type: ErrorObjectSchema,\r\n  })\r\n  error: ErrorObjectSchema;\r\n\r\n  @ApiProperty({\r\n    description: 'Response metadata',\r\n    type: ResponseMetaSchema,\r\n  })\r\n  meta: ResponseMetaSchema;\r\n}\r\n\r\n/**\r\n * Validation Error Response Schema\r\n * Spezifisch für 400 Bad Request mit Validation Details\r\n */\r\nexport class ValidationErrorResponseSchema extends ErrorResponseSchema {\r\n  @ApiProperty({\r\n    description: 'Error details with validation fields',\r\n    type: ErrorObjectSchema,\r\n    example: {\r\n      code: 'VALIDATION_ERROR',\r\n      message: 'Validation failed',\r\n      statusCode: 400,\r\n      details: {\r\n        fields: {\r\n          email: ['Invalid email format'],\r\n          password: ['Password must be at least 8 characters'],\r\n        },\r\n      },\r\n    },\r\n  })\r\n  declare error: ErrorObjectSchema;\r\n}\r\n\r\n/**\r\n * Unauthorized Error Response Schema\r\n * Spezifisch für 401 Unauthorized\r\n */\r\nexport class UnauthorizedErrorResponseSchema extends ErrorResponseSchema {\r\n  @ApiProperty({\r\n    description: 'Error details for authentication failure',\r\n    type: ErrorObjectSchema,\r\n    example: {\r\n      code: 'AUTH_TOKEN_MISSING',\r\n      message: 'Invalid or missing authentication token',\r\n      statusCode: 401,\r\n    },\r\n  })\r\n  declare error: ErrorObjectSchema;\r\n}\r\n\r\n/**\r\n * Forbidden Error Response Schema\r\n * Spezifisch für 403 Forbidden\r\n */\r\nexport class ForbiddenErrorResponseSchema extends ErrorResponseSchema {\r\n  @ApiProperty({\r\n    description: 'Error details for authorization failure',\r\n    type: ErrorObjectSchema,\r\n    example: {\r\n      code: 'AUTH_INSUFFICIENT_ROLE',\r\n      message: 'Access denied. Required role: ADMIN',\r\n      statusCode: 403,\r\n    },\r\n  })\r\n  declare error: ErrorObjectSchema;\r\n}\r\n\r\n/**\r\n * Not Found Error Response Schema\r\n * Spezifisch für 404 Not Found\r\n */\r\nexport class NotFoundErrorResponseSchema extends ErrorResponseSchema {\r\n  @ApiProperty({\r\n    description: 'Error details for not found',\r\n    type: ErrorObjectSchema,\r\n    example: {\r\n      code: 'RESOURCE_NOT_FOUND',\r\n      message: 'Resource not found',\r\n      statusCode: 404,\r\n    },\r\n  })\r\n  declare error: ErrorObjectSchema;\r\n}\r\n\r\n/**\r\n * Conflict Error Response Schema\r\n * Spezifisch für 409 Conflict\r\n */\r\nexport class ConflictErrorResponseSchema extends ErrorResponseSchema {\r\n  @ApiProperty({\r\n    description: 'Error details for conflict',\r\n    type: ErrorObjectSchema,\r\n    example: {\r\n      code: 'USER_EMAIL_EXISTS',\r\n      message: 'Email is already registered',\r\n      statusCode: 409,\r\n    },\r\n  })\r\n  declare error: ErrorObjectSchema;\r\n}\r\n\r\n/**\r\n * Internal Server Error Response Schema\r\n * Spezifisch für 500 Internal Server Error\r\n */\r\nexport class InternalServerErrorResponseSchema extends ErrorResponseSchema {\r\n  @ApiProperty({\r\n    description: 'Error details for server error',\r\n    type: ErrorObjectSchema,\r\n    example: {\r\n      code: 'SERVER_ERROR',\r\n      message: 'An unexpected error occurred. Please try again later.',\r\n      statusCode: 500,\r\n    },\r\n  })\r\n  declare error: ErrorObjectSchema;\r\n}\r\n"],"version":3}