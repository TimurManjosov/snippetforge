ca0690ed69f620952c02ff35532be3ec
"use strict";
// test/mocks/database.mock.ts
Object.defineProperty(exports, "__esModule", { value: true });
exports.createMockDatabaseService = void 0;
/**
 * Database Service Mock
 *
 * Mockt den DatabaseService für Unit Tests.
 * Keine echte DB-Verbindung nötig.
 */
const createMockDatabaseService = () => ({
    drizzle: {
        query: {
            // ========================================
            // USERS TABLE
            // ========================================
            users: {
                findFirst: jest.fn(),
                findMany: jest.fn(),
            },
            // ========================================
            // SNIPPETS TABLE (NEU!)
            // ========================================
            snippets: {
                findFirst: jest.fn(),
                findMany: jest.fn(),
            },
        },
        // ========================================
        // QUERY BUILDER METHODS
        // ========================================
        insert: jest.fn().mockReturnValue({
            values: jest.fn().mockReturnValue({
                returning: jest.fn(),
            }),
        }),
        update: jest.fn().mockReturnValue({
            set: jest.fn().mockReturnValue({
                where: jest.fn().mockReturnValue({
                    returning: jest.fn(),
                }),
            }),
        }),
        delete: jest.fn().mockReturnValue({
            where: jest.fn().mockReturnValue({
                returning: jest.fn(),
            }),
        }),
        select: jest.fn().mockReturnValue({
            from: jest.fn().mockReturnValue({
                where: jest.fn().mockReturnValue({
                    groupBy: jest.fn().mockReturnValue({
                        orderBy: jest.fn(),
                    }),
                }),
                limit: jest.fn().mockReturnValue({
                    offset: jest.fn().mockReturnValue({
                        orderBy: jest.fn(),
                    }),
                }),
                orderBy: jest.fn(),
            }),
        }),
    },
    // ========================================
    // DATABASE SERVICE METHODS
    // ========================================
    healthCheck: jest.fn().mockResolvedValue(true),
    onModuleInit: jest.fn(),
    onModuleDestroy: jest.fn(),
});
exports.createMockDatabaseService = createMockDatabaseService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcdGVzdFxcbW9ja3NcXGRhdGFiYXNlLm1vY2sudHMiLCJtYXBwaW5ncyI6IjtBQUFBLDhCQUE4Qjs7O0FBRTlCOzs7OztHQUtHO0FBRUksTUFBTSx5QkFBeUIsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzlDLE9BQU8sRUFBRTtRQUNQLEtBQUssRUFBRTtZQUNMLDJDQUEyQztZQUMzQyxjQUFjO1lBQ2QsMkNBQTJDO1lBQzNDLEtBQUssRUFBRTtnQkFDTCxTQUFTLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDcEIsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDcEI7WUFFRCwyQ0FBMkM7WUFDM0Msd0JBQXdCO1lBQ3hCLDJDQUEyQztZQUMzQyxRQUFRLEVBQUU7Z0JBQ1IsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Z0JBQ3BCLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2FBQ3BCO1NBQ0Y7UUFFRCwyQ0FBMkM7UUFDM0Msd0JBQXdCO1FBQ3hCLDJDQUEyQztRQUMzQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDaEMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDckIsQ0FBQztTQUNILENBQUM7UUFFRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDN0IsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7b0JBQy9CLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2lCQUNyQixDQUFDO2FBQ0gsQ0FBQztTQUNILENBQUM7UUFFRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDL0IsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDckIsQ0FBQztTQUNILENBQUM7UUFFRixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztZQUNoQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQztnQkFDOUIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7b0JBQy9CLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDO3dCQUNqQyxPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtxQkFDbkIsQ0FBQztpQkFDSCxDQUFDO2dCQUNGLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDO29CQUMvQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQzt3QkFDaEMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7cUJBQ25CLENBQUM7aUJBQ0gsQ0FBQztnQkFDRixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTthQUNuQixDQUFDO1NBQ0gsQ0FBQztLQUNIO0lBRUQsMkNBQTJDO0lBQzNDLDJCQUEyQjtJQUMzQiwyQ0FBMkM7SUFDM0MsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7SUFDOUMsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDdkIsZUFBZSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDM0IsQ0FBQyxDQUFDO0FBbEVVLFFBQUEseUJBQXlCLDZCQWtFbkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcdGVzdFxcbW9ja3NcXGRhdGFiYXNlLm1vY2sudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGVzdC9tb2Nrcy9kYXRhYmFzZS5tb2NrLnRzXHJcblxyXG4vKipcclxuICogRGF0YWJhc2UgU2VydmljZSBNb2NrXHJcbiAqXHJcbiAqIE1vY2t0IGRlbiBEYXRhYmFzZVNlcnZpY2UgZsO8ciBVbml0IFRlc3RzLlxyXG4gKiBLZWluZSBlY2h0ZSBEQi1WZXJiaW5kdW5nIG7DtnRpZy5cclxuICovXHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlTW9ja0RhdGFiYXNlU2VydmljZSA9ICgpID0+ICh7XHJcbiAgZHJpenpsZToge1xyXG4gICAgcXVlcnk6IHtcclxuICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICAvLyBVU0VSUyBUQUJMRVxyXG4gICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgIHVzZXJzOiB7XHJcbiAgICAgICAgZmluZEZpcnN0OiBqZXN0LmZuKCksXHJcbiAgICAgICAgZmluZE1hbnk6IGplc3QuZm4oKSxcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAgLy8gU05JUFBFVFMgVEFCTEUgKE5FVSEpXHJcbiAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAgc25pcHBldHM6IHtcclxuICAgICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKSxcclxuICAgICAgICBmaW5kTWFueTogamVzdC5mbigpLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAvLyBRVUVSWSBCVUlMREVSIE1FVEhPRFNcclxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIGluc2VydDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgIHZhbHVlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgcmV0dXJuaW5nOiBqZXN0LmZuKCksXHJcbiAgICAgIH0pLFxyXG4gICAgfSksXHJcblxyXG4gICAgdXBkYXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgc2V0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICB3aGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICByZXR1cm5pbmc6IGplc3QuZm4oKSxcclxuICAgICAgICB9KSxcclxuICAgICAgfSksXHJcbiAgICB9KSxcclxuXHJcbiAgICBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICB3aGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgcmV0dXJuaW5nOiBqZXN0LmZuKCksXHJcbiAgICAgIH0pLFxyXG4gICAgfSksXHJcblxyXG4gICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgZnJvbTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgd2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xyXG4gICAgICAgICAgZ3JvdXBCeTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgIG9yZGVyQnk6IGplc3QuZm4oKSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGxpbWl0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcclxuICAgICAgICAgIG9mZnNldDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XHJcbiAgICAgICAgICAgIG9yZGVyQnk6IGplc3QuZm4oKSxcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIG9yZGVyQnk6IGplc3QuZm4oKSxcclxuICAgICAgfSksXHJcbiAgICB9KSxcclxuICB9LFxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgLy8gREFUQUJBU0UgU0VSVklDRSBNRVRIT0RTXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gIGhlYWx0aENoZWNrOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXHJcbiAgb25Nb2R1bGVJbml0OiBqZXN0LmZuKCksXHJcbiAgb25Nb2R1bGVEZXN0cm95OiBqZXN0LmZuKCksXHJcbn0pO1xyXG5cclxuZXhwb3J0IHR5cGUgTW9ja0RhdGFiYXNlU2VydmljZSA9IFJldHVyblR5cGU8dHlwZW9mIGNyZWF0ZU1vY2tEYXRhYmFzZVNlcnZpY2U+O1xyXG4iXSwidmVyc2lvbiI6M30=