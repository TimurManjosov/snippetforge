{"file":"C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\shared\\filters\\all-exceptions.filter.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\shared\\filters\\all-exceptions.filter.spec.ts"],"sourcesContent":["// src/shared/filters/all-exceptions.filter.spec.ts\r\n\r\nimport { HttpException, HttpStatus } from '@nestjs/common';\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport { AllExceptionsFilter } from './all-exceptions.filter';\r\nimport { ErrorCodes } from '../constants';\r\n\r\ndescribe('AllExceptionsFilter', () => {\r\n  let filter: AllExceptionsFilter;\r\n  let mockResponse: any;\r\n  let mockRequest: any;\r\n  let mockArgumentsHost: any;\r\n  let originalNodeEnv: string | undefined;\r\n\r\n  beforeEach(async () => {\r\n    const module: TestingModule = await Test.createTestingModule({\r\n      providers: [AllExceptionsFilter],\r\n    }).compile();\r\n\r\n    filter = module.get<AllExceptionsFilter>(AllExceptionsFilter);\r\n\r\n    // Mock Response\r\n    mockResponse = {\r\n      status: jest.fn().mockReturnThis(),\r\n      json: jest.fn().mockReturnThis(),\r\n    };\r\n\r\n    // Mock Request\r\n    mockRequest = {\r\n      url: '/api/test',\r\n      method: 'POST',\r\n      ip: '127.0.0.1',\r\n      headers: {\r\n        'user-agent': 'test-agent',\r\n      },\r\n    };\r\n\r\n    // Mock ArgumentsHost\r\n    mockArgumentsHost = {\r\n      switchToHttp: jest.fn().mockReturnValue({\r\n        getResponse: () => mockResponse,\r\n        getRequest: () => mockRequest,\r\n      }),\r\n    };\r\n\r\n    // Save original NODE_ENV\r\n    originalNodeEnv = process.env.NODE_ENV;\r\n  });\r\n\r\n  afterEach(() => {\r\n    // Restore original NODE_ENV\r\n    if (originalNodeEnv !== undefined) {\r\n      process.env.NODE_ENV = originalNodeEnv;\r\n    } else {\r\n      delete process.env.NODE_ENV;\r\n    }\r\n  });\r\n\r\n  describe('catch - production mode', () => {\r\n    beforeEach(() => {\r\n      process.env.NODE_ENV = 'production';\r\n      // Recreate filter to pick up new NODE_ENV\r\n      filter = new AllExceptionsFilter();\r\n    });\r\n\r\n    it('should return generic message in production for TypeError', () => {\r\n      const exception = new TypeError('Cannot read property of undefined');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      expect(mockResponse.status).toHaveBeenCalledWith(500);\r\n      expect(mockResponse.json).toHaveBeenCalledWith({\r\n        success: false,\r\n        error: {\r\n          code: ErrorCodes.SERVER_ERROR,\r\n          message: 'An unexpected error occurred. Please try again later.',\r\n          statusCode: 500,\r\n        },\r\n        meta: {\r\n          timestamp: expect.any(String),\r\n          path: '/api/test',\r\n          method: 'POST',\r\n        },\r\n      });\r\n    });\r\n\r\n    it('should not leak error details in production', () => {\r\n      const exception = new Error(\r\n        'Database connection failed at /home/user/app/db.js:123',\r\n      );\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.message).toBe(\r\n        'An unexpected error occurred. Please try again later.',\r\n      );\r\n      expect(response.error.message).not.toContain('/home/user/app');\r\n      expect(response.error.message).not.toContain('db.js');\r\n    });\r\n\r\n    it('should log error with full details in production', () => {\r\n      const loggerErrorSpy = jest.spyOn(filter['logger'], 'error');\r\n      const exception = new Error('Sensitive internal error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      expect(loggerErrorSpy).toHaveBeenCalled();\r\n      const logCall = loggerErrorSpy.mock.calls[0];\r\n      expect(logCall[0]).toContain('Sensitive internal error');\r\n    });\r\n  });\r\n\r\n  describe('catch - development mode', () => {\r\n    beforeEach(() => {\r\n      process.env.NODE_ENV = 'development';\r\n      // Recreate filter to pick up new NODE_ENV\r\n      filter = new AllExceptionsFilter();\r\n    });\r\n\r\n    it('should return sanitized error message in development', () => {\r\n      const exception = new Error('Database query failed');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      expect(mockResponse.status).toHaveBeenCalledWith(500);\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.message).toBe('Database query failed');\r\n    });\r\n\r\n    it('should sanitize file paths in development', () => {\r\n      const exception = new Error(\r\n        'Failed at /home/user/project/src/file.ts:123',\r\n      );\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.message).toContain('[REDACTED]');\r\n      expect(response.error.message).not.toContain('/home/user/project');\r\n    });\r\n\r\n    it('should sanitize Windows file paths in development', () => {\r\n      const exception = new Error('Error in C:\\\\Users\\\\Project\\\\app.js');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.message).toContain('[REDACTED]');\r\n      expect(response.error.message).not.toContain('C:\\\\Users\\\\Project');\r\n    });\r\n\r\n    it('should sanitize connection strings in development', () => {\r\n      const exception = new Error(\r\n        'Failed to connect to postgresql://user:pass@localhost:5432/db',\r\n      );\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.message).toContain('[REDACTED]');\r\n      expect(response.error.message).not.toContain('user:pass@localhost');\r\n    });\r\n\r\n    it('should truncate very long error messages', () => {\r\n      const longMessage = 'Error: ' + 'x'.repeat(600);\r\n      const exception = new Error(longMessage);\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.message.length).toBeLessThanOrEqual(500);\r\n    });\r\n  });\r\n\r\n  describe('error type identification', () => {\r\n    beforeEach(() => {\r\n      process.env.NODE_ENV = 'development';\r\n      filter = new AllExceptionsFilter();\r\n    });\r\n\r\n    it('should identify JWT token invalid error', () => {\r\n      const exception = new Error('Invalid token');\r\n      exception.name = 'JsonWebTokenError';\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.AUTH_TOKEN_INVALID);\r\n    });\r\n\r\n    it('should identify JWT token expired error', () => {\r\n      const exception = new Error('Token expired');\r\n      exception.name = 'TokenExpiredError';\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.AUTH_TOKEN_EXPIRED);\r\n    });\r\n\r\n    it('should identify JWT NotBeforeError', () => {\r\n      const exception = new Error('Token not active');\r\n      exception.name = 'NotBeforeError';\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.AUTH_TOKEN_INVALID);\r\n    });\r\n\r\n    it('should identify database connection error', () => {\r\n      const exception = new Error('ECONNREFUSED to database');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.SERVER_DATABASE_ERROR);\r\n    });\r\n\r\n    it('should identify postgres error', () => {\r\n      const exception = new Error('postgres connection failed');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.SERVER_DATABASE_ERROR);\r\n    });\r\n\r\n    it('should identify unique constraint violation', () => {\r\n      const exception = new Error(\r\n        'duplicate key value violates unique constraint',\r\n      );\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.RESOURCE_ALREADY_EXISTS);\r\n    });\r\n\r\n    it('should identify JSON parse error', () => {\r\n      const exception = new SyntaxError('Unexpected token in JSON');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.VALIDATION_ERROR);\r\n    });\r\n\r\n    it('should use default code for unknown error', () => {\r\n      const exception = new Error('Unknown error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.error.code).toBe(ErrorCodes.SERVER_ERROR);\r\n    });\r\n  });\r\n\r\n  describe('HttpException handling', () => {\r\n    it('should handle HttpException with warning', () => {\r\n      const loggerWarnSpy = jest.spyOn(filter['logger'], 'warn');\r\n      const exception = new HttpException('Not Found', HttpStatus.NOT_FOUND);\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      expect(loggerWarnSpy).toHaveBeenCalledWith(\r\n        'HttpException caught by AllExceptionsFilter - this should not happen',\r\n      );\r\n      expect(mockResponse.status).toHaveBeenCalledWith(404);\r\n    });\r\n  });\r\n\r\n  describe('request ID extraction', () => {\r\n    beforeEach(() => {\r\n      process.env.NODE_ENV = 'development';\r\n      filter = new AllExceptionsFilter();\r\n    });\r\n\r\n    it('should extract x-request-id from headers', () => {\r\n      mockRequest.headers['x-request-id'] = 'req-123';\r\n      const exception = new Error('Test error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.meta.requestId).toBe('req-123');\r\n    });\r\n\r\n    it('should extract x-correlation-id if x-request-id is not present', () => {\r\n      mockRequest.headers['x-correlation-id'] = 'corr-456';\r\n      const exception = new Error('Test error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.meta.requestId).toBe('corr-456');\r\n    });\r\n\r\n    it('should not include requestId if neither header is present', () => {\r\n      const exception = new Error('Test error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.meta.requestId).toBeUndefined();\r\n    });\r\n  });\r\n\r\n  describe('non-Error exception handling', () => {\r\n    beforeEach(() => {\r\n      process.env.NODE_ENV = 'development';\r\n      filter = new AllExceptionsFilter();\r\n    });\r\n\r\n    it('should handle string throws', () => {\r\n      const exception = 'string error';\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      expect(mockResponse.status).toHaveBeenCalledWith(500);\r\n      expect(mockResponse.json).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should log string throws appropriately', () => {\r\n      const loggerErrorSpy = jest.spyOn(filter['logger'], 'error');\r\n      const exception = 'string error';\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      expect(loggerErrorSpy).toHaveBeenCalled();\r\n      const logCall = loggerErrorSpy.mock.calls[0];\r\n      expect(logCall[0]).toContain('Unknown exception type');\r\n      expect(logCall[1]).toBe('string error');\r\n    });\r\n  });\r\n\r\n  describe('logging', () => {\r\n    beforeEach(() => {\r\n      process.env.NODE_ENV = 'development';\r\n      filter = new AllExceptionsFilter();\r\n    });\r\n\r\n    it('should always log with stack trace for Error instances', () => {\r\n      const loggerErrorSpy = jest.spyOn(filter['logger'], 'error');\r\n      const exception = new Error('Test error with stack');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      expect(loggerErrorSpy).toHaveBeenCalled();\r\n      const logCall = loggerErrorSpy.mock.calls[0];\r\n      expect(logCall[1]).toBeTruthy(); // Stack trace\r\n      expect(logCall[2]).toContain('method'); // Log context\r\n    });\r\n\r\n    it('should include request metadata in log context', () => {\r\n      const loggerErrorSpy = jest.spyOn(filter['logger'], 'error');\r\n      const exception = new Error('Test error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const logContextStr = loggerErrorSpy.mock.calls[0][2];\r\n      const logContext = JSON.parse(logContextStr);\r\n\r\n      expect(logContext).toMatchObject({\r\n        method: 'POST',\r\n        url: '/api/test',\r\n        ip: '127.0.0.1',\r\n        userAgent: 'test-agent',\r\n        timestamp: expect.any(String),\r\n      });\r\n    });\r\n\r\n    it('should truncate long user agents', () => {\r\n      const loggerErrorSpy = jest.spyOn(filter['logger'], 'error');\r\n      const longUserAgent = 'x'.repeat(200);\r\n      mockRequest.headers['user-agent'] = longUserAgent;\r\n\r\n      const exception = new Error('Test error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const logContextStr = loggerErrorSpy.mock.calls[0][2];\r\n      const logContext = JSON.parse(logContextStr);\r\n\r\n      expect(logContext.userAgent.length).toBe(100);\r\n    });\r\n  });\r\n\r\n  describe('response format', () => {\r\n    beforeEach(() => {\r\n      process.env.NODE_ENV = 'development';\r\n      filter = new AllExceptionsFilter();\r\n    });\r\n\r\n    it('should never include stack trace in response', () => {\r\n      const exception = new Error('Test error');\r\n      exception.stack = 'Error: Test error\\n    at something...';\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(JSON.stringify(response)).not.toContain(exception.stack);\r\n    });\r\n\r\n    it('should always set success to false', () => {\r\n      const exception = new Error('Test error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.success).toBe(false);\r\n    });\r\n\r\n    it('should include proper metadata', () => {\r\n      const exception = new Error('Test error');\r\n\r\n      filter.catch(exception, mockArgumentsHost);\r\n\r\n      const response = mockResponse.json.mock.calls[0][0];\r\n      expect(response.meta).toMatchObject({\r\n        timestamp: expect.any(String),\r\n        path: '/api/test',\r\n        method: 'POST',\r\n      });\r\n    });\r\n  });\r\n});\r\n"],"version":3}