3d0e3998b2fad9189fb064bd12b699db
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.users = exports.roleEnum = void 0;
const pg_core_1 = require("drizzle-orm/pg-core");
// Role Enum
exports.roleEnum = (0, pg_core_1.pgEnum)('role', ['USER', 'ADMIN', 'MODERATOR']);
// Users Table
exports.users = (0, pg_core_1.pgTable)('users', {
    id: (0, pg_core_1.uuid)('id').primaryKey().defaultRandom(),
    email: (0, pg_core_1.varchar)('email', { length: 255 }).notNull().unique(),
    username: (0, pg_core_1.varchar)('username', { length: 30 }).notNull().unique(),
    passwordHash: (0, pg_core_1.varchar)('password_hash', { length: 60 }).notNull(),
    bio: (0, pg_core_1.text)('bio'),
    avatarUrl: (0, pg_core_1.text)('avatar_url'),
    role: (0, exports.roleEnum)('role').default('USER').notNull(),
    createdAt: (0, pg_core_1.timestamp)('created_at', { withTimezone: true })
        .defaultNow()
        .notNull(),
    updatedAt: (0, pg_core_1.timestamp)('updated_at', { withTimezone: true })
        .defaultNow()
        .notNull(),
}, (table) => ({
    emailIdx: (0, pg_core_1.index)('users_email_idx').on(table.email),
    usernameIdx: (0, pg_core_1.index)('users_username_idx').on(table.username),
    roleIdx: (0, pg_core_1.index)('users_role_idx').on(table.role),
}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcc3JjXFxsaWJcXGRiXFxzY2hlbWEudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsaURBUTZCO0FBRTdCLFlBQVk7QUFDQyxRQUFBLFFBQVEsR0FBRyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxFQUFFLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBRXZFLGNBQWM7QUFDRCxRQUFBLEtBQUssR0FBRyxJQUFBLGlCQUFPLEVBQzFCLE9BQU8sRUFDUDtJQUNFLEVBQUUsRUFBRSxJQUFBLGNBQUksRUFBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxhQUFhLEVBQUU7SUFDM0MsS0FBSyxFQUFFLElBQUEsaUJBQU8sRUFBQyxPQUFPLEVBQUUsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUU7SUFDM0QsUUFBUSxFQUFFLElBQUEsaUJBQU8sRUFBQyxVQUFVLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUU7SUFDaEUsWUFBWSxFQUFFLElBQUEsaUJBQU8sRUFBQyxlQUFlLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUU7SUFDaEUsR0FBRyxFQUFFLElBQUEsY0FBSSxFQUFDLEtBQUssQ0FBQztJQUNoQixTQUFTLEVBQUUsSUFBQSxjQUFJLEVBQUMsWUFBWSxDQUFDO0lBQzdCLElBQUksRUFBRSxJQUFBLGdCQUFRLEVBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sRUFBRTtJQUNoRCxTQUFTLEVBQUUsSUFBQSxtQkFBUyxFQUFDLFlBQVksRUFBRSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsQ0FBQztTQUN2RCxVQUFVLEVBQUU7U0FDWixPQUFPLEVBQUU7SUFDWixTQUFTLEVBQUUsSUFBQSxtQkFBUyxFQUFDLFlBQVksRUFBRSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsQ0FBQztTQUN2RCxVQUFVLEVBQUU7U0FDWixPQUFPLEVBQUU7Q0FDYixFQUNELENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ1YsUUFBUSxFQUFFLElBQUEsZUFBSyxFQUFDLGlCQUFpQixDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFDbEQsV0FBVyxFQUFFLElBQUEsZUFBSyxFQUFDLG9CQUFvQixDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFDM0QsT0FBTyxFQUFFLElBQUEsZUFBSyxFQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7Q0FDaEQsQ0FBQyxDQUNILENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcc3JjXFxsaWJcXGRiXFxzY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgaW5kZXgsXG4gIHBnRW51bSxcbiAgcGdUYWJsZSxcbiAgdGV4dCxcbiAgdGltZXN0YW1wLFxuICB1dWlkLFxuICB2YXJjaGFyLFxufSBmcm9tICdkcml6emxlLW9ybS9wZy1jb3JlJztcblxuLy8gUm9sZSBFbnVtXG5leHBvcnQgY29uc3Qgcm9sZUVudW0gPSBwZ0VudW0oJ3JvbGUnLCBbJ1VTRVInLCAnQURNSU4nLCAnTU9ERVJBVE9SJ10pO1xuXG4vLyBVc2VycyBUYWJsZVxuZXhwb3J0IGNvbnN0IHVzZXJzID0gcGdUYWJsZShcbiAgJ3VzZXJzJyxcbiAge1xuICAgIGlkOiB1dWlkKCdpZCcpLnByaW1hcnlLZXkoKS5kZWZhdWx0UmFuZG9tKCksXG4gICAgZW1haWw6IHZhcmNoYXIoJ2VtYWlsJywgeyBsZW5ndGg6IDI1NSB9KS5ub3ROdWxsKCkudW5pcXVlKCksXG4gICAgdXNlcm5hbWU6IHZhcmNoYXIoJ3VzZXJuYW1lJywgeyBsZW5ndGg6IDMwIH0pLm5vdE51bGwoKS51bmlxdWUoKSxcbiAgICBwYXNzd29yZEhhc2g6IHZhcmNoYXIoJ3Bhc3N3b3JkX2hhc2gnLCB7IGxlbmd0aDogNjAgfSkubm90TnVsbCgpLFxuICAgIGJpbzogdGV4dCgnYmlvJyksXG4gICAgYXZhdGFyVXJsOiB0ZXh0KCdhdmF0YXJfdXJsJyksXG4gICAgcm9sZTogcm9sZUVudW0oJ3JvbGUnKS5kZWZhdWx0KCdVU0VSJykubm90TnVsbCgpLFxuICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wKCdjcmVhdGVkX2F0JywgeyB3aXRoVGltZXpvbmU6IHRydWUgfSlcbiAgICAgIC5kZWZhdWx0Tm93KClcbiAgICAgIC5ub3ROdWxsKCksXG4gICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnLCB7IHdpdGhUaW1lem9uZTogdHJ1ZSB9KVxuICAgICAgLmRlZmF1bHROb3coKVxuICAgICAgLm5vdE51bGwoKSxcbiAgfSxcbiAgKHRhYmxlKSA9PiAoe1xuICAgIGVtYWlsSWR4OiBpbmRleCgndXNlcnNfZW1haWxfaWR4Jykub24odGFibGUuZW1haWwpLFxuICAgIHVzZXJuYW1lSWR4OiBpbmRleCgndXNlcnNfdXNlcm5hbWVfaWR4Jykub24odGFibGUudXNlcm5hbWUpLFxuICAgIHJvbGVJZHg6IGluZGV4KCd1c2Vyc19yb2xlX2lkeCcpLm9uKHRhYmxlLnJvbGUpLFxuICB9KSxcbik7XG5cbi8vIFR5cGVzXG5leHBvcnQgdHlwZSBVc2VyID0gdHlwZW9mIHVzZXJzLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIE5ld1VzZXIgPSB0eXBlb2YgdXNlcnMuJGluZmVySW5zZXJ0O1xuIl0sInZlcnNpb24iOjN9