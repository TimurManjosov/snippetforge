{"file":"C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\shared\\types\\error-response.type.ts","mappings":";AAAA,0CAA0C;;AAqG1C,kDAwBC;AAnCD;;;;;;;;;;GAUG;AACH,SAAgB,mBAAmB,CAAC,MAQnC;IACC,OAAO;QACL,OAAO,EAAE,KAAK;QACd,KAAK,EAAE;YACL,IAAI,EAAE,MAAM,CAAC,IAAI;YACjB,OAAO,EAAE,MAAM,CAAC,OAAO;YACvB,UAAU,EAAE,MAAM,CAAC,UAAU;YAC7B,GAAG,CAAC,MAAM,CAAC,OAAO,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,OAAO,EAAE,CAAC;SACnD;QACD,IAAI,EAAE;YACJ,SAAS,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;YACnC,IAAI,EAAE,MAAM,CAAC,IAAI;YACjB,MAAM,EAAE,MAAM,CAAC,MAAM;YACrB,GAAG,CAAC,MAAM,CAAC,SAAS,IAAI,EAAE,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,CAAC;SACzD;KACF,CAAC;AACJ,CAAC","names":[],"sources":["C:\\Users\\timur\\Programming\\Projects\\snippetforge\\apps\\api\\src\\shared\\types\\error-response.type.ts"],"sourcesContent":["// src/shared/types/error-response.type.ts\r\n\r\nimport { type ErrorCode } from '../constants';\r\n\r\n/**\r\n * Standard Error Response Format\r\n *\r\n * WARUM dieses Format?\r\n * 1. Konsistenz: Frontend kann ALLE Errors gleich parsen\r\n * 2. Debugging: Meta-Daten helfen bei Fehlersuche\r\n * 3. Machine-Readable: Error Code für programmatische Verarbeitung\r\n * 4. Human-Readable: Message für Anzeige\r\n *\r\n * STRUKTUR:\r\n * {\r\n *   success: false,              // Schneller Check\r\n *   error: {\r\n *     code: \"AUTH_TOKEN_EXPIRED\", // Machine-readable\r\n *     message: \"Token expired\",   // Human-readable\r\n *     statusCode: 401,            // HTTP Status\r\n *     details?: {...}           // Zusätzliche Infos (Validation Errors)\r\n *   },\r\n *   meta: {\r\n *     timestamp: \"...\",           // Wann der Error auftrat\r\n *     path: \"/api/auth/me\",       // Welcher Endpoint\r\n *     method: \"GET\",              // Welche HTTP Methode\r\n *     requestId?: \"...\"           // Für Tracing (optional)\r\n *   }\r\n * }\r\n */\r\n\r\n/**\r\n * Error Details - Zusätzliche Informationen zum Error\r\n */\r\nexport interface ErrorDetails {\r\n  /** Feld-spezifische Validation Errors */\r\n  fields?: Record<string, string[]>;\r\n\r\n  /** Zusätzliche Kontext-Informationen */\r\n  context?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Error Object innerhalb der Response\r\n */\r\nexport interface ErrorObject {\r\n  /** Machine-readable Error Code */\r\n  code: ErrorCode;\r\n\r\n  /** Human-readable Error Message */\r\n  message: string;\r\n\r\n  /** HTTP Status Code */\r\n  statusCode: number;\r\n\r\n  /** Optionale Details (z.B. Validation Errors) */\r\n  details?: ErrorDetails;\r\n}\r\n\r\n/**\r\n * Meta-Informationen zur Response\r\n */\r\nexport interface ResponseMeta {\r\n  /** ISO 8601 Timestamp */\r\n  timestamp: string;\r\n\r\n  /** Request Path */\r\n  path: string;\r\n\r\n  /** HTTP Method */\r\n  method: string;\r\n\r\n  /** Request ID für Tracing (falls vorhanden) */\r\n  requestId?: string;\r\n}\r\n\r\n/**\r\n * Vollständige Error Response\r\n */\r\nexport interface ErrorResponse {\r\n  /** Immer false bei Errors */\r\n  success: false;\r\n\r\n  /** Error Details */\r\n  error: ErrorObject;\r\n\r\n  /** Meta-Informationen */\r\n  meta: ResponseMeta;\r\n}\r\n\r\n/**\r\n * Factory Function für Error Response\r\n *\r\n * WARUM Factory statt Constructor?\r\n * - Einfacher zu verwenden\r\n * - Keine Klassen-Instanziierung nötig\r\n * - Bessere Tree-Shaking Möglichkeit\r\n *\r\n * @param params - Error Parameter\r\n * @returns Formatierte Error Response\r\n */\r\nexport function createErrorResponse(params: {\r\n  code: ErrorCode;\r\n  message: string;\r\n  statusCode: number;\r\n  path: string;\r\n  method: string;\r\n  details?: ErrorDetails;\r\n  requestId?: string;\r\n}): ErrorResponse {\r\n  return {\r\n    success: false,\r\n    error: {\r\n      code: params.code,\r\n      message: params.message,\r\n      statusCode: params.statusCode,\r\n      ...(params.details && { details: params.details }),\r\n    },\r\n    meta: {\r\n      timestamp: new Date().toISOString(),\r\n      path: params.path,\r\n      method: params.method,\r\n      ...(params.requestId && { requestId: params.requestId }),\r\n    },\r\n  };\r\n}\r\n"],"version":3}