96e5242e1f27003ccf2215f6a822b469
"use strict";
// src/app.module.ts
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppModule = void 0;
const common_1 = require("@nestjs/common");
const config_1 = require("@nestjs/config");
const core_1 = require("@nestjs/core");
const app_controller_1 = require("./app.controller");
const app_service_1 = require("./app.service");
const auth_1 = require("./modules/auth");
const users_1 = require("./modules/users");
const database_1 = require("./shared/database");
/**
 * AppModule - Root Module
 *
 * WICHTIG: JwtAuthGuard ist GLOBAL aktiviert!
 * Das bedeutet:  ALLE Routes sind geschützt, außer @Public()
 *
 * Vorteile:
 * - Security by Default (vergessene Auth ist nicht möglich)
 * - Weniger Boilerplate (@UseGuards auf jeder Route)
 *
 * Nachteile:
 * - Muss @Public() für öffentliche Routes setzen
 *
 * ALTERNATIV: Guards nur auf einzelnen Routes/Controllern
 * Dann APP_GUARD Provider entfernen und @UseGuards() nutzen
 */
let AppModule = class AppModule {
};
exports.AppModule = AppModule;
exports.AppModule = AppModule = __decorate([
    (0, common_1.Module)({
        imports: [
            // 1. Configuration
            config_1.ConfigModule.forRoot({
                isGlobal: true,
                envFilePath: '.env',
                cache: true,
            }),
            // 2. Database
            database_1.DatabaseModule,
            // 3. Feature Modules
            users_1.UsersModule,
            auth_1.AuthModule,
        ],
        controllers: [app_controller_1.AppController],
        providers: [
            app_service_1.AppService,
            // Global JwtAuthGuard
            // Alle Routes sind geschützt, außer @Public()
            {
                provide: core_1.APP_GUARD,
                useClass: auth_1.JwtAuthGuard,
            },
        ],
    })
], AppModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcc3JjXFxhcHAubW9kdWxlLnRzIiwibWFwcGluZ3MiOiI7QUFBQSxvQkFBb0I7Ozs7Ozs7OztBQUVwQiwyQ0FBd0M7QUFDeEMsMkNBQThDO0FBQzlDLHVDQUF5QztBQUN6QyxxREFBaUQ7QUFDakQsK0NBQTJDO0FBQzNDLHlDQUEwRDtBQUMxRCwyQ0FBOEM7QUFDOUMsZ0RBQW1EO0FBRW5EOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQTZCSSxJQUFNLFNBQVMsR0FBZixNQUFNLFNBQVM7Q0FBRyxDQUFBO0FBQVosOEJBQVM7b0JBQVQsU0FBUztJQTVCckIsSUFBQSxlQUFNLEVBQUM7UUFDTixPQUFPLEVBQUU7WUFDUCxtQkFBbUI7WUFDbkIscUJBQVksQ0FBQyxPQUFPLENBQUM7Z0JBQ25CLFFBQVEsRUFBRSxJQUFJO2dCQUNkLFdBQVcsRUFBRSxNQUFNO2dCQUNuQixLQUFLLEVBQUUsSUFBSTthQUNaLENBQUM7WUFFRixjQUFjO1lBQ2QseUJBQWM7WUFFZCxxQkFBcUI7WUFDckIsbUJBQVc7WUFDWCxpQkFBVTtTQUNYO1FBQ0QsV0FBVyxFQUFFLENBQUMsOEJBQWEsQ0FBQztRQUM1QixTQUFTLEVBQUU7WUFDVCx3QkFBVTtZQUVWLHNCQUFzQjtZQUN0Qiw4Q0FBOEM7WUFDOUM7Z0JBQ0UsT0FBTyxFQUFFLGdCQUFTO2dCQUNsQixRQUFRLEVBQUUsbUJBQVk7YUFDdkI7U0FDRjtLQUNGLENBQUM7R0FDVyxTQUFTLENBQUciLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFx0aW11clxcUHJvZ3JhbW1pbmdcXFByb2plY3RzXFxzbmlwcGV0Zm9yZ2VcXGFwcHNcXGFwaVxcc3JjXFxhcHAubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAubW9kdWxlLnRzXHJcblxyXG5pbXBvcnQgeyBNb2R1bGUgfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XHJcbmltcG9ydCB7IENvbmZpZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvY29uZmlnJztcclxuaW1wb3J0IHsgQVBQX0dVQVJEIH0gZnJvbSAnQG5lc3Rqcy9jb3JlJztcclxuaW1wb3J0IHsgQXBwQ29udHJvbGxlciB9IGZyb20gJy4vYXBwLmNvbnRyb2xsZXInO1xyXG5pbXBvcnQgeyBBcHBTZXJ2aWNlIH0gZnJvbSAnLi9hcHAuc2VydmljZSc7XHJcbmltcG9ydCB7IEF1dGhNb2R1bGUsIEp3dEF1dGhHdWFyZCB9IGZyb20gJy4vbW9kdWxlcy9hdXRoJztcclxuaW1wb3J0IHsgVXNlcnNNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvdXNlcnMnO1xyXG5pbXBvcnQgeyBEYXRhYmFzZU1vZHVsZSB9IGZyb20gJy4vc2hhcmVkL2RhdGFiYXNlJztcclxuXHJcbi8qKlxyXG4gKiBBcHBNb2R1bGUgLSBSb290IE1vZHVsZVxyXG4gKlxyXG4gKiBXSUNIVElHOiBKd3RBdXRoR3VhcmQgaXN0IEdMT0JBTCBha3RpdmllcnQhXHJcbiAqIERhcyBiZWRldXRldDogIEFMTEUgUm91dGVzIHNpbmQgZ2VzY2jDvHR6dCwgYXXDn2VyIEBQdWJsaWMoKVxyXG4gKlxyXG4gKiBWb3J0ZWlsZTpcclxuICogLSBTZWN1cml0eSBieSBEZWZhdWx0ICh2ZXJnZXNzZW5lIEF1dGggaXN0IG5pY2h0IG3DtmdsaWNoKVxyXG4gKiAtIFdlbmlnZXIgQm9pbGVycGxhdGUgKEBVc2VHdWFyZHMgYXVmIGplZGVyIFJvdXRlKVxyXG4gKlxyXG4gKiBOYWNodGVpbGU6XHJcbiAqIC0gTXVzcyBAUHVibGljKCkgZsO8ciDDtmZmZW50bGljaGUgUm91dGVzIHNldHplblxyXG4gKlxyXG4gKiBBTFRFUk5BVElWOiBHdWFyZHMgbnVyIGF1ZiBlaW56ZWxuZW4gUm91dGVzL0NvbnRyb2xsZXJuXHJcbiAqIERhbm4gQVBQX0dVQVJEIFByb3ZpZGVyIGVudGZlcm5lbiB1bmQgQFVzZUd1YXJkcygpIG51dHplblxyXG4gKi9cclxuQE1vZHVsZSh7XHJcbiAgaW1wb3J0czogW1xyXG4gICAgLy8gMS4gQ29uZmlndXJhdGlvblxyXG4gICAgQ29uZmlnTW9kdWxlLmZvclJvb3Qoe1xyXG4gICAgICBpc0dsb2JhbDogdHJ1ZSxcclxuICAgICAgZW52RmlsZVBhdGg6ICcuZW52JyxcclxuICAgICAgY2FjaGU6IHRydWUsXHJcbiAgICB9KSxcclxuXHJcbiAgICAvLyAyLiBEYXRhYmFzZVxyXG4gICAgRGF0YWJhc2VNb2R1bGUsXHJcblxyXG4gICAgLy8gMy4gRmVhdHVyZSBNb2R1bGVzXHJcbiAgICBVc2Vyc01vZHVsZSxcclxuICAgIEF1dGhNb2R1bGUsXHJcbiAgXSxcclxuICBjb250cm9sbGVyczogW0FwcENvbnRyb2xsZXJdLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQXBwU2VydmljZSxcclxuXHJcbiAgICAvLyBHbG9iYWwgSnd0QXV0aEd1YXJkXHJcbiAgICAvLyBBbGxlIFJvdXRlcyBzaW5kIGdlc2Now7x0enQsIGF1w59lciBAUHVibGljKClcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogQVBQX0dVQVJELFxyXG4gICAgICB1c2VDbGFzczogSnd0QXV0aEd1YXJkLFxyXG4gICAgfSxcclxuICBdLFxyXG59KVxyXG5leHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9XHJcbiJdLCJ2ZXJzaW9uIjozfQ==